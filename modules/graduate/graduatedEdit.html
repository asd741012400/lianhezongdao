<form class="form">
    <div class="form_title"><img class="form_title_img" src="images/headPortrait.png"/><font>学生信息</font>
    </div>
    <div class="formBox borderLeft borderRight borderBottom">
        <div class="data width50">
            <div class="data_title">头像</div>
            <div style="margin-left: 50px;">
                <div id="data-photo" type="img"></div>
                <span style="color: #ccc">建议尺寸300x300</span>
            </div>
        </div>
        <div class="data width50">
            <div class="data_title">真实头像</div>
            <div>
                <div id="data-portrait" type="img"></div>
                <span style="color: #ccc">建议尺寸300x300</span>
            </div>
        </div>
        <div class="data width50">
            <div class="data_title">性别</div>
            <span id="data-sex" type="radio"><input type="radio" value="1" checked/>男<input type="radio" value="0"/>女</span>
        </div>
        <div class="data width50">
            <div class="data_title">
                姓名
            </div>
            <span class="data_error">姓名不能为空</span>
            <input class="input" id="data-name" type="text" placeholder="请填写姓名"/>
        </div>
        <div class="data width50">
            <div class="data_title">
                出生日期
            </div>
            <span class="data_error">出生日期不能为空</span>
            <input class="input" id="data-birthday" type="text" placeholder="请输入出生日期" /><span style="position: relative;margin-left: -40px;margin-top: 2px;padding:7px;color: #ccc;" id="age"></span>
        </div>
        <div class="data width50">
            <div class="data_title">

                入学年度
            </div>
            <span class="data_error">入学年度不能为空</span>
            <input class="input" id="data-rxnd" type="text" placeholder="请输入入学年度"/>
        </div>
        <div class="data width50">
            <div class="data_title">

                班级
            </div>
            <span class="data_error">班级不能为空</span>
            <input class="input" id="data-classId" type="text" placeholder="请选择班级"/>
        </div>
        <div class="data width50">
            <div class="data_title">

                学号
            </div>
            <span class="data_error">学号不能为空</span>
            <input class="input" id="data-studNo" type="text" placeholder="请填写学号"/>
        </div>
        <div class="data width50">
            <div class="data_title">手机号码</div>
            <span class="data_error">手机号码不能为空</span>
            <input class="input" id="data-phone" type="text" placeholder="请填写手机号码"/>
        </div>
        <div class="data width50">
            <div class="data_title">身份证号码</div>
            <span class="data_error">身份证号码不能为空</span>
            <input class="input" id="data-cardId" type="text" placeholder="请填写身份证号码"/>
        </div>
        <div class="data width50">
            <div class="data_title">应往届</div>
            <span id="data-graduateType" type="radio"><input type="radio" value="0" id="graduateType0"/><label for="graduateType0">往届</label><input type="radio" id="graduateType1" checked value="1"/><label for="graduateType1">应届</label></span>
        </div>
        <div class="data width50">
            <div class="data_title">民族</div>
            <span class="data_error"></span>
            <input class="input" id="data-nation" type="text" placeholder="请填写民族"/>
        </div>
        <div class="data width50">
            <div class="data_title">是否贫困生</div>
            <span class="data_error"></span>
            <span id="data-poor" type="radio"><input type="radio" value="1" checked/>否<input type="radio" value="2"/>是</span>
        </div>
        <div class="data width50">
            <div class="data_title">扶贫银行卡号</div>
            <span class="data_error"></span>
            <input class="input" id="data-poorCard" type="text" placeholder="请填写扶贫银行卡号"/>
        </div>
        <div class="data width100">
            <div class="data_title">家庭地址</div>
            <span class="data_error">输入错误</span>
            <input class="input" id="data-familyAddress" type="text" placeholder="市-区-街道-小区"/>
        </div>
        <div class="data width50">
            <div class="data_title">是否挂读</div>
            <span id="data-hang" type="radio"><input type="radio" value="0" id="hang0" checked/><label for="hang0">否</label><input type="radio" id="hang1" value="1"/><label for="hang1">是</label></span>
        </div>
        <div class="data width50">
            <div class="data_title">是否签订就业协议</div>
            <span id="data-agreement" type="radio"><input type="radio" value="0" id="agreement0" checked/><label for="agreement0">否</label><input type="radio" id="agreement1" value="1"/><label for="agreement1">是</label></span>
        </div>
        <div class="data width50">
            <div class="data_title">户口类型</div>
            <span id="data-rrType" type="radio"><input type="radio" value="0" id="rrType0"/><label for="graduateType0">农村</label><input type="radio" id="graduateType1" checked value="1"/><label for="rrType1">城镇</label></span>
        </div>
        <div class="data width50">
            <div class="data_title">籍贯</div>
            <input class="input" id="data-origin" type="text" placeholder="请输入籍贯"/>
        </div>
        <div class="data width50">
            <div class="data_title">户口地址</div>
            <input class="input" id="data-rrAddress" type="text" placeholder="请填写户口地址"/>
        </div>
        <div class="data width50">
            <div class="data_title">毕业学校</div>
            <input class="input" id="data-lastSchool" type="text" placeholder="请填写毕业学校"/>
        </div>
        <div id="customAtt"></div>
        <div class="clear"></div>
    </div>
    <div class="form_title"><img class="form_title_img" src="images/headPortrait.png"/><font>毕业状态</font>
    </div>
    <div class="formBox borderLeft borderRight borderBottom">
        <div class="data width50">
            <div class="data_title">状态</div>
            <span class="data_error"></span>
            <input class="input" id="data-graduatedTypeName" type="text" placeholder="" />
        </div>
        <div class="data width50">
            <div class="data_title">时间</div>
            <span class="data_error"></span>
            <input class="input" id="data-graduatedBysj" type="text" placeholder="" />
        </div>
        <div class="data width100">
            <div class="data_title">原因</div>
            <span class="data_error"></span>
            <textarea class="input" id="data-graduatedExplain" type="text" placeholder=""></textarea>
        </div>
        <div class="clear"></div>
    </div>
    <div class="clear"></div>
    <div class="formBtns alignCenter">
        <input type="button" id="cancel" value="取消" class="bg_ffffff"/>
    </div>
</form>
<style>
    #data-photo{
        height:100px;
        width: 100px;
        margin-right:10px;
        border-radius: 100px;
        overflow: hidden;
    }
    #data-photo img{
        width: 100px;
    }
    .input{
        border:none;
    }
</style>
<script>
    (function() {
        Y.ajax(ucIP + '/api/uc/students/cusAtt/v0.1/list',function(ret){
            Y.qiNiouKey(function(upladArgs){
                var studentId = Y.getUrlParam("id");
                var fromConfig = {
                    studentId : studentId,
                    ftype:Y.getUrlParam("type"),
                    photo : {o:new Y.Img($("#data-photo"),"<img style='cursor: pointer;' src='images/headPortrait.png' />",{width:300,height:300,radius:150,scale:[1,1]},upladArgs)},
                    portrait : {o:new Y.Img($("#data-portrait"),"<img style='cursor: pointer;' src='images/headPortrait.png' />",{width:300,height:300,scale:[1,1]},upladArgs)},
                    name : {
                        o:$("#data-name"),
                        e:"blur",
                    },
                    sex : {o:new Y.Radio($("#data-sex input"))},
                    poor : {o:new Y.Radio($("#data-poor input"))},
                    birthday : {
                        o:$("#data-birthday"),
                        i:function(e){
                            var calendar = new Y.Calendar($("#data-birthday"),{date:''});
                            calendar.maxDate = new Date();
                            $("#data-birthday").focus(function(){
                                var _this = $(this);
                                _this.prev().hide();
                                calendar.open(function(d){
                                    _this.val(d);
                                    calendar.close();
                                    if(calendar.finalDate){
                                        $("#age").show();
                                        $("#age").html((new Date()).age(calendar.finalDate.getFullYear(),calendar.finalDate.getMonth() + 1,calendar.finalDate.getDate()) + "岁");
                                    }else{
                                        $("#age").hide();
                                    }
                                });
                            })
                        },
                        v:function(v){
                            $('#data-birthday').val(v.substring(0,10))
                            if(v && v.indexOf("-") > -1){
                                v = v.split("-");
                                $("#age").show();
                                $("#age").html((new Date()).age(v[0],v[1],v[2]) + "岁");
                            }
                        }
                    },
                    rxnd:{
                        o:$("#data-rxnd"),
                        i:function(){
                            var calendar = new Y.Calendar($("#data-rxnd"),{date:new Date().Format('yyyy')});
                            calendar.maxDate = new Date();
                            $("#data-rxnd").focus(function(){
                                var _this = $(this);
                                _this.prev().hide();
                                calendar.open(function(d){
                                    _this.val(d);
                                    calendar.close();
                                });
                            })
                        }
                    },
                    className : {
                        o:$("#data-classId"),
                        s:"className",
                        _o:$("#data-classId"),
                    },
                    poorCard:{o:$("#data-poorCard")},
                    hang:{o:new Y.Radio($("#data-hang input"))},
                    studNo : {
                        o:$("#data-studNo"),
                        e:"blur",
                    },
                    phone : {
                        o:$("#data-phone"),
                        e:"blur",
                    },
                    cardId:{
                        o:$("#data-cardId"),
                        e:"blur",
                    },
                    nation : {o:$('#data-nation')},
                    familyAddress : {o:$("#data-familyAddress")},
                    web:true,
                    studentType:1,
                    origin:{o:$('#data-origin')},
                    rrType:{o:new Y.Radio($("#data-rrType input"))},
                    agreement:{o:new Y.Radio($("#data-agreement input"))},
                    graduateType:{o:new Y.Radio($("#data-graduateType input"))},
                    lastSchool:{o:$('#data-lastSchool')},
                    graduatedStatus:{
                        o:new Y.Select($('#data-graduatedTypeName'),{'4':'正常毕业','5':'结业','6':'肄业'})
                    },
                    graduatedReason:{o:$('#data-graduatedExplain')},
                    graduatedTime:{o:$('#data-graduatedBysj')},
                    rrAddress:{o:$('#data-rrAddress')}
                }
                if(ret && !ret.errorMsg){
                    var components = new Y.ComponentAnalysis(ret);
                    components.init($('#customAtt'));
                    fromConfig.customAttKey = {
                        o:components,
                        f:function(){
                            return components.verify();
                        }
                    }
                }
                Y.disabled(fromConfig);

                var from = new Y.From(fromConfig, "studentId", {
                    getURL: ucIP + "/api/uc/v1.0/graduate/{studentId}/graduatedDetail?ftype=" + Y.getUrlParam("type"),
                    title: "提交学生信息",
                    dataJson: false
                });
            })
        })
        //取消
        $("#cancel").click(function(){
            Y.back(-1);
        });
    })()
</script>