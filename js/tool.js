var Y={};!function(S){var i;if(window.error=function(){},window.log=console&&console.log,Date.prototype.only=function(){var t=this.getTime().toString();return t=- -t.substr(t.length-10,9)},Date.prototype.age=function(t,i,e){var n=0;return n=this.getFullYear()-t,this.getMonth()+1>i?n++:this.getMonth()+1==i&&this.getDate()>=e&&n++,n-1},Date.prototype.Format=function(t){var i={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var e in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),i)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[e]:("00"+i[e]).substr((""+i[e]).length)));return t},Date.prototype.parse=function(t,i){var e=[],n=[];switch(i){case"date":e=t.split("-");break;case"time":n=t.split(":");break;default:e=(t=t.split(" "))[0].split("-"),n=t[1].split(":")}return e[0]&&this.setFullYear(e[0]),e[1]&&this.setMonth(e[1]-1),e[2]&&this.setDate(e[2]),n[0]&&this.setHours(n[0]),n[1]&&this.setMinutes(n[1]),n[2]&&this.setSeconds(n[2]),this},Date.prototype.contDown=function(t){var i=(t=t.split(" "))[0].split("-"),e=t[1].split(":"),n=new Date;return n.setFullYear(i[0],i[1]-1,i[2]),n.setHours(e[0]),n.setMinutes(e[1]),n.setSeconds(e[2]),parseInt((n.getTime()-this.getTime())/1e3)},Date.prototype.weekDay=function(){var t=this.getDay();switch(t){case 0:t="星期日";break;case 1:t="星期一";break;case 2:t="星期二";break;case 3:t="星期三";break;case 4:t="星期四";break;case 5:t="星期五";break;case 6:t="星期六"}return t},String.prototype.replaceAll=function(t,i){return this.split(t).join(i)},String.prototype.max=function(t,i){i=i||"...";var e=this;return e=e.length>t?e.substr(0,t-i.length)+i:e},String.prototype._eval=function(t,i,e){var n=this;for(var s in t){var o=t[s];o=null==o||null==o?"":o,n=(n=n.replace(new RegExp("{()"+s+"}","gi"),o)).replace(new RegExp("{listStyle_"+s+"}","gi"),"string"==typeof o?o.charAt(0):"?"),i&&(n=i(n,s,o,t))}return e&&(n=e(n,t)),n},String.prototype.dhms=function(){var t=- -this,i="",e=parseInt(t/86400);i=0<e?e+"天":"";var n=parseInt(t/3600%24);(i||0<n)&&(i+=n+"小时");var s=parseInt(t/60%60);(i||0<s)&&(i+=s+"分");var o=parseInt(t%60);return(i||0<o)&&(i+=o+"秒"),i},S.Version={createTime:1527144797717,authorize:0},S.detectZoom=function(){var t=0;return window.devicePixelRatio?t=window.devicePixelRatio:window.screen&&window.screen.deviceXDPI&&window.screen.logicalXDPI?t=window.screen.deviceXDPI/window.screen.logicalXDPI:void 0!==window.outerWidth&&void 0!==window.innerWidth&&(t=window.outerWidth/window.innerWidth),Math.round(100*t)},S.getParam=function(t){var i=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),e=window.location.search.substr(1).match(i);return null!=e?decodeURIComponent(e[2]):null},S.Cookie={useH5:!0,Get:function(t){if(localStorage&&this.useH5)return localStorage[t];var i=document.cookie.indexOf(t+"="),e=i+t.length+1;if(!i&&t!=document.cookie.substring(0,t.length))return null;if(-1==i)return null;var n=document.cookie.indexOf(";",e);return-1==n&&(n=document.cookie.length),unescape(document.cookie.substring(e,n))},Set:function(t,i,e,n,s,o){if(localStorage&&this.useH5)return localStorage[t]=i,!1;var a=new Date;a.setTime(a.getTime()),e&&(e=1e3*e*60*60*24);var r=new Date(a.getTime()+e);document.cookie=t+"="+escape(i)+(e?";expires="+r.toGMTString():"")+(n?";path="+n:"")+(s?";domain="+s:"")+(o?";secure":"")},Delete:function(t,i,e){if(localStorage&&this.useH5)return localStorage[t]="",!1;this.Get(t)&&(document.cookie=t+"="+(i?";path="+i:"")+(e?";domain="+e:"")+";expires=Thu, 01-Jan-1970 00:00:01 GMT")}},S.getBlobURL=window.URL&&URL.createObjectURL.bind(URL)||window.webkitURL&&webkitURL.createObjectURL.bind(webkitURL)||window.createObjectURL,S.revokeBlobURL=window.URL&&URL.revokeObjectURL.bind(URL)||window.webkitURL&&webkitURL.revokeObjectURL.bind(webkitURL)||window.revokeObjectURL,S.dataURLtoBlob=function(t){for(var i=t.split(","),e=i[0].match(/:(.*?);/)[1],n=atob(i[1]),s=n.length,o=new Uint8Array(s);s--;)o[s]=n.charCodeAt(s);return new Blob([o],{type:e})},S.fileSize=function(t){var i="B";return 1024<t&&(i="Kb",1024<(t=Math.ceil(t/1024))&&(t=parseInt(t/1024*100)/100,i="Mb")),t+i},S.creatCover=function(t){var i=(t=t||{}).id||"creatCover",e=t.obj,n=0,s=0,o=0,a=0;e!=window&&e&&e!=$(window)&&e[0]!=window?(n=e.offset().left,s=e.offset().top,o=e.width(),a=e.height(),e.append("<div id='"+i+"'></div>"),t.unScroll0||e.scrollTop(0)):(o=$(window).width(),a=$(window).height(),$("body").append("<div id='"+i+"'></div>"),t.unScroll0||$(window).scrollTop(0));var r={position:t.position||"absolute",zIndex:t.zIndex||S.zIndex(4),left:n+"px",top:s+"px",opacity:t.opacity||0==t.opacity?t.opacity:.01,background:t.background||"#ffffff",width:e!=window&&e?o+"px":"100%",minHeight:a+"px"};if(t.styles)for(var l in t.styles)r[l]=t.styles[l];$("#"+i).css(r)},S.loading=function(o){var t=(o=o||{}).opacity||.1;this.msg=o.msg||"",this.isOpen=!1,this.rgba="255,255,255,"+t,this.color="#000000",this.imageSrc='<div class="loadEffect" style="transform:scale(0.5,0.5);margin-top: 50px;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></div>',this.image=$(this.imageSrc),this.loadBoxStyle=o.loadBoxStyle,this.id=null,this.open=function(t,i,e){if(this.id="load"+(new Date).only(),!this.isOpen){t=null==t?this.msg:t,i=null==i?this.rgba:i,e=null==e?this.color:e;var n="<div>"+t+"</div>",s="";S.creatCover({id:this.id+"_cover",obj:this.obj,zIndex:o.zIndex||S.zIndex(4),opacity:0,background:"#ffffff",unScroll0:!0}),s=this.loadBoxStyle?this.loadBoxStyle:this.obj?"text-align:center;border-radius :5px;height:100px;width:100px;position:fixed;z-index:"+(o.zIndex||S.zIndex(4))+";background:rgba("+i+");color:"+e+";left:"+((this.obj.width()-100)/2+this.obj.offset().left)+"px;top:"+((this.obj.height()-100)/2+this.obj.offset().top)+"px":"text-align:center;border-radius :5px;height:100px;width:100px;position:fixed;z-index:"+(o.zIndex||S.zIndex(4))+";background:rgba("+i+");color:"+e+";left:"+($(window).width()-100)/2+"px;top:"+($(window).height()-100)/2+"px",$("body").append("<div id='"+this.id+"' style='"+s+"'>"+this.imageSrc+n+"</div>"),this.isOpen=!0}},this.close=function(){this.isOpen=!1,$("#"+this.id+"_cover").remove(),$("#"+this.id).remove()},this.status=function(){return this.isOpen}},S.confirmx=function(t,i,e){e=e||{};var n=new S.Windows(e);n.width=e._w||300,n.height=e._h||150,n.title=e.title||"提示",n.closeFun = e.closeFun,n.style=e.style,n.styles=e.styles,n.bodyScrollNo=!!e.bodyScrollNo,n.cancleFn=e.cancleFn,n.content="<div style='text-align: center;' id='alertContent"+n.id+"'>"+t+"</div>",n.bottom=e.noBtns?"":"<div style='text-align: right;margin-right:10px;margin-top: 10px;'><span id='alertOk"+n.id+"' style='padding:5px 15px; border-radius: 3px;cursor: pointer;margin-right:10px;' class='bg_00b7ee'>确定</span><span id='alertCancle"+n.id+"' style='padding:5px 15px; border: 1px solid #e4e4e4; border-radius: 3px;cursor: pointer;'>取消</span></div>",n.open(),e.initFn&&e.initFn();var s=$("#"+n.id+"_content").height(),o=$("#alertContent"+n.id).height();var paddingT = e.imgBox?'0':(s-o)/2+"px";return o<n.height&&$("#alertContent"+n.id).css("padding-top",paddingT),$("#alertOk"+n.id).click(function(){e.verifyFn?e.verifyFn()&&(i&&i(),n.close(!0)):(i&&i(),n.close(!0))}),$("#alertCancle"+n.id).click(function(){if(e.closeFun){e.closeFun()};n.close()}),n},S.alertx=function(t,i,e){e=e||{};var n=new S.Windows(e);n.closeBtn=1==e.closeBtn,n.width=e.width||300,n.height=e.height||150,n.title=e.title||"提示",n.style=e.style,n.styles=e.styles,n.content="<div style='text-align: center;' id='alertContent"+n.id+"'>"+t+"</div>",n.bottom="<div style='text-align: right;margin-right:10px;margin-top: 10px;'><span id='alert"+n.id+"' style='padding:5px 15px; border-radius: 3px;cursor: pointer;' class='bg_00b7ee'>确定</span></div>",e.toast&&(n.bottom="",n.titleHeight=0,n.bottomHeight=0,n.styles=n.styles||{},n.styles.box="background:#000;background:rgba(0,0,0,0.7);color:#fff;border-radius:5px;","top"==e.toast.position&&(n.styles.box+="top:150px;"),"bottom"==e.toast.position&&(n.styles.box+="top:auto;bottom:50px;"),n.cover=!1),e.unOpen||n.open(),e.toast&&(i&&i(),setTimeout(function(){!e.close?n.close():''},e.toast.time||3e3));var s=$("#"+n.id+"_content").height(),o=$("#alertContent"+n.id).height();var paddingT = e.imgBox?'0':(s-o)/2+"px";return o<n.height&&$("#alertContent"+n.id).css("padding-top",paddingT),$("#alert"+n.id).click(function(){n.close(),i&&i()}),n},S.tips=function(t,i){i=i||{};var e=(new Date).only(),n=i.bgColor?i.bgColor:"fcc463",s="<div id='tips"+e+"' style='padding:5px;position:fixed;width:100%;left:0;top:0;z-index:"+e+";background:#"+n+";'><div>"+t+"</div><span id='tipsClose"+e+"' style='position:fixed;right:10px;top:5px;cursor:pointer;'>x</span></div>";$("body").append(s),i.time&&setTimeout(function(){$("#tips"+e).remove()},i.time),$("#tipsClose"+e).click(function(){$("#tips"+e).remove()})},S.Calendar=function(t,i){var u=this,e=(i=i||{}).date,n=i.type;this.alignTop=false;if(this.type=n||"",this.date=new Date,this.selectedDate=new Date,this.yearRange=[1900,2060],this.timeType=i.timeType||[],this.boxStyles=i.boxStyles||"",this.maxDate=null,this.minDate=null,"string"==typeof e){var s=new Date;if(/^\d{4}-\d{1,2}-\d{1,2}/.test(e)){l=(l=(l=parseInt(e.split("-")[0],10))<this.yearRange[0]?this.yearRange[0]:l)>this.yearRange[1]?this.yearRange[1]:l,r=12<(r=(r=parseInt(e.split("-")[1],10))<1?1:r)?12:r;var o=parseInt(e.split("-")[2],10),a=[31,28,31,30,31,30,31,31,30,31,30,31];a[1]=l%4==0&&l%100!=4||l%400==0?29:28,o=(o=o<1?1:o)>a[r-1]?a[r-1]:o,s.setFullYear(l,r-1,o)}else if(/^\d{4}-\d{1,2}/.test(e)){var r;this.type="month",l=(l=(l=parseInt(e.split("-")[0],10))<this.yearRange[0]?this.yearRange[0]:l)>this.yearRange[1]?this.yearRange[1]:l,r=12<(r=(r=parseInt(e.split("-")[1],10))<1?1:r)?12:r,s.setFullYear(l,r-1)}else if(/^\d{4}/.test(e)){var l;this.type="year",l=(l=(l=parseInt(e,10))<this.yearRange[0]?this.yearRange[0]:l)>this.yearRange[1]?this.yearRange[1]:l,s.setFullYear(l)}this.date.setFullYear(s.getFullYear(),s.getMonth(),s.getDate()),this.selectedDate.setFullYear(s.getFullYear(),s.getMonth(),s.getDate())}this.obj=t,this.obj&&(t.css({background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAABLElEQVQ4T42Sr0/DUBDH3/c1IUuThiHqSECjUCQkmIagSDC9CkKYw8wiMFMoHBbXYPtah0DMbWiwc/wJIKji3ZEmbdN1Xcdzd9/73M8HVb44jgee5y2IaK/y9WmoxCRJtrXWX0RU+/o0ZFk2E5ETZh5WYJqm0qza1gDMUQW5rjvI8/ydiA7aYJdWgwDOwjCcGmNOAUybFbu0GmwvZJNdgMVCho1FbPm+z0EQ/K6Di1GWQGPMCMB9AYjIdRRFsyzLLkTkmYh2qkQrYJqmc631jbX2HMAugEdmfgJw3OxqBSwyJklypLWOmXmstb5zHGdsrf3oBY0xVwBumflSKfXtOM5L2fahUmpCRA+F3dXqQinFAH5E5JWIJmXgJxHtr51x0wmWwOrL/Rcq497+ADrjyL/BazvZAAAAAElFTkSuQmCC) 3px center no-repeat",paddingLeft:"25px",width:t.width()-22+"px"}),t.attr("readonly","readonly")),this.id=null,this.width=350,this.action=null,this.finalDate=null,this.toString=function(){var t="";if("year"==this.type)this.finalDate=this.minDate&&this.date<this.minDate?this.minDate:this.date,this.finalDate=this.maxDate&&this.date>this.maxDate?this.maxDate:this.finalDate,this.finalDate=this.minDate&&this.maxDate&&this.minDate>this.maxDate?this.date:this.finalDate,t=this.finalDate.getFullYear();else if("month"==this.type){this.finalDate=this.minDate&&this.date<this.minDate?this.minDate:this.date,this.finalDate=this.maxDate&&this.date>this.maxDate?this.maxDate:this.finalDate,this.finalDate=this.minDate&&this.maxDate&&this.minDate>this.maxDate?this.date:this.finalDate;var i=this.finalDate.getMonth()+1;t=this.finalDate.getFullYear()+"-"+(i<10?"0"+i:i)}else{this.finalDate=this.minDate&&this.selectedDate<this.minDate?this.minDate:this.selectedDate,this.finalDate=this.maxDate&&this.selectedDate>this.maxDate?this.maxDate:this.finalDate,this.finalDate=this.minDate&&this.maxDate&&this.minDate>this.maxDate?this.selectedDate:this.finalDate;i=this.finalDate.getMonth()+1;var e=this.finalDate.getDate();t=this.finalDate.getFullYear()+"-"+(i<10?"0"+i:i)+"-"+(e<10?"0"+e:e);for(var n=0;n<u.timeType.length;n++)u.timeType[n]=9<u.timeType[n]?parseInt(u.timeType[n]):"0"+parseInt(u.timeType[n]);"time"==this.type?t="":t+=0<this.timeType.length?" ":"",1==this.timeType.length?(this.finalDate.setHours(this.timeType[0]),t+=this.timeType[0]):2==this.timeType.length?(this.finalDate.setHours(this.timeType[0]),this.finalDate.setMinutes(this.timeType[1]),t+=this.timeType[0]+":"+this.timeType[1]):3==this.timeType.length&&(this.finalDate.setHours(this.timeType[0]),this.finalDate.setMinutes(this.timeType[1]),this.finalDate.setSeconds(this.timeType[2]),t+=this.timeType[0]+":"+this.timeType[1]+":"+this.timeType[2])}return t},e?(this.obj&&t.val(e),0<this.timeType.length?"time"==this.type?(this.selectedDate.parse(e,"time"),this.timeType=e.split(":")):(this.selectedDate.parse(e,"date"),this.timeType=e.split(" ")[1].split(":")):this.selectedDate.parse(e,"time"==this.type?"time":"date"),this.finalDate=this.selectedDate):this.obj&&t.val(null==e?this.toString():""),this.zIndex=S.zIndex(4),this.open=function(t){if(!S.Calendar.isShow){S.Calendar.isShow=!0,this.id="calendar"+(new Date).only();var i=$(window).scrollTop();S.creatCover({id:this.id+"_cover",obj:window,zIndex:this.zIndex-1,opacity:0,background:"#ffffff",position:"fixed",unScroll0:!0});var top=0;if (this.obj) {top=this.alignTop?(this.obj.offset().top+this.obj.height()-440):(this.obj.offset().top+this.obj.height()+5)};var e=this.obj?this.boxStyles+"left:"+this.obj.offset().left+"px;top:"+ top +"px;":this.boxStyles,n="<div id='"+this.id+"' class='unSelect boxShadow' style='border:1px solid #eee;border-radius :5px;width:"+(this.width+20)+"px;position:absolute;z-index:"+this.zIndex+";"+e+"text-align:center;background:#fff;min-height:200px;color:#333333'>";n+="</div>",$("body").append(n),$(window).scrollTop(i),this.show(),$("#"+this.id+"_cover").click(function(){u.close()}),t&&"function"==typeof t&&(this.action=t)}},this.show=function(t,i){var min=true;"year"==this.type&&"year"!=t&&(t="year"),"month"==this.type&&"month"!=t&&"year"!=t&&(t="month"),"time"==this.type&&(t="time");var e="",n="<style>",s="<div class='dateContent'><div id='dateContent'><div id='dateContentBox'>",o=this.width/7,r=0;if(n+=i?"":"@keyframes dateContent{from {transform:scale(0.5,0.5);} to {transform:scale(1,1);}}",n+=min?".dateContent{width: "+this.width+"px;height:"+this.width+"px;overflow: hidden;margin:0px 10px;animation: dateContent 0.5s;}":".dateContent{width: "+this.width+"px;height:"+(this.width-50)+"px;overflow: hidden;margin:0px 10px;animation: dateContent 0.5s;}",n+="#dateContent{width: "+(this.width+20)+"px;height:"+(this.width+20)+"px;overflow: scroll;}",n+=".dateTitle{text-align: right;height: 50px; line-height: 50px;overflow: hidden;margin-top:10px;}",n+=".dayTitle{text-align: center;height: "+o+"px; line-height: "+o+"px;overflow: hidden;width:"+o+"px;float:left;}","year"==t){n+=".dateSpan{cursor: pointer;width:"+(o=this.width/5)+"px;height:"+o+"px; text-align:center;line-height:"+o+"px;float:left;overflow: hidden;border-radius :"+o+"px}",e="<div class='dateTitle'><span style='float: left; margin-left: 10px;color:#777777'>"+this.yearRange[0]+"-"+this.yearRange[1]+"</span><span style='margin-right: 10px; border:1px solid #d5d5d5; border-radius: 3px;padding:3px 5px; cursor: pointer;' id='clearBtn'>清空</span></div>";for(var a=this.yearRange[0];a<=this.yearRange[1];a++)s+="<div class='"+(a==this.date.getFullYear()?"dateSpan dateSpanActive":"dateSpan")+" years'>"+a+"</div>"}else if("month"==t){n+=".dateSpan{cursor: pointer;width:"+(o=this.width/5)+"px;height:"+o+"px; text-align:center;line-height:"+o+"px;float:left;overflow: hidden;border-radius :"+o+"px}",e="<div class='dateTitle'><span style='float: left; margin-left: 10px;'><font id='inputYear' title='点击输入年份'>"+this.date.getFullYear()+" 年</font><font id='setYearBtn' style='font-size: 12px; cursor: pointer;color: #b0b0b0;margin-left: 5px;'>< 选择年份</font></span><span style='margin-right: 10px; border:1px solid #d5d5d5; border-radius: 3px;padding:3px 5px; cursor: pointer;' id='clearBtn'>清空</span></div>";for(a=1;a<=12;a++)s+="<div class='"+(a==this.date.getMonth()+1?"dateSpan dateSpanActive":"dateSpan")+" months'>"+a+"月</div>"}else if("time"==t){e="time"==this.type?"<div class='dateTitle'><span style='margin-right: 10px; border:1px solid #d5d5d5; border-radius: 3px;padding:3px 5px; cursor: pointer;' id='clearBtn'>清空</span></div>":"<div class='dateTitle'><span style='float: left; margin-left: 10px;cursor: pointer;' id='setDaysBtn'>"+this.date.getFullYear()+" 年 "+(this.date.getMonth()+1)+" 月 "+this.selectedDate.getDate()+" 日<font style='font-size: 12px; color: #b0b0b0;margin-left: 5px;'>< 选择日期</font></span><span style='margin-right: 10px; border:1px solid #d5d5d5; border-radius: 3px;padding:3px 5px; cursor: pointer;' id='clearBtn'>清空</span></div>";var l="<div class='timeInputs'>",d="<div class='timeSliders'>";for(a=0;a<this.timeType.length;a++)switch(a){case 0:l+="<input type='text' class='timeInput' id='timeHoursInput' value='' />",d+="<div class='timeSlider' id='timeHoursSlider'><div class='timeSliderTitle'>小时</div><div class='timeSliderAction'><div class='timeSliderAction_active'></div><div class='timeSliderAction_block'></div></div><div class='timeSliderMax'>23</div></div>";break;case 1:l+=":<input type='text' class='timeInput' id='timeMinutesInput' value='' />",d+="<div class='timeSlider' id='timeMinutesSlider'><div class='timeSliderTitle'>分钟</div><div class='timeSliderAction'><div class='timeSliderAction_active'></div><div class='timeSliderAction_block'></div></div><div class='timeSliderMax'>59</div></div>";break;case 2:l+=":<input type='text' class='timeInput' id='timeSecondsInput' value='' />",d+="<div class='timeSlider' id='timeSecondsSlider'><div class='timeSliderTitle'>秒</div><div class='timeSliderAction'><div class='timeSliderAction_active'></div><div class='timeSliderAction_block'></div></div><div class='timeSliderMax'>59</div></div>"}s+=(l+="</div>")+(d+="</div>"),s+="<div style='text-align:center;'><span style='border:1px solid #d5d5d5; border-radius: 3px;padding:5px 15px; cursor: pointer;' id='timeOk'>确定</span></div>",n+=min?".timeInputs{text-align:center;}":".timeInputs{text-align:center;margin-top:40px;margin-bottom:20px;}",n+=".timeInput{width:30px;height:30px;padding:0px 5px;line-height:40px;margin:0px 5px;border:1px solid #dedede;text-align:center;}",n+=min?"":".timeSliders{margin-top:30px;margin-bottom:20px;}",n+=min?".timeSlider{margin:10px auto 0 auto;width:"+(this.width-80)+"px;height:35px;overflow:hidden;}":".timeSlider{margin:10px auto;width:"+(this.width-80)+"px;height:50px;overflow:hidden;}",n+=".timeSliderTitle{float:left;width:50px;text-align:left;}",n+=".timeSliderAction{float:left;width:"+(r=this.width-80-100)+"px;height:10px;border-radius:2px;background:#e9e9e9;margin-top:6px;}",n+=".timeSliderAction_active{height:10px;border-radius:2px;background:#00a7f5;overflow:hidden;width:0px;}",n+=".timeSliderAction_block{width:18px;height:18px;position:absolute;border-radius:2px;background:#1e8dc1;cursor:pointer;margin-top:-14px;}",n+=".timeSliderMax{float:left;width:50px;text-align:center;}"}else{n+=".dateSpan{cursor: pointer;width:"+o+"px;height:"+o+"px; text-align:center;line-height:"+o+"px;float:left;overflow: hidden;border-radius :"+o+"px}",e="<div class='dateTitle'><span style='float: left; margin-left: 10px;'><font id='inputYear' title='点击输入年份'>"+this.date.getFullYear()+" 年</font><font id='inputMonth' title='点击输入月份'> "+(this.date.getMonth()+1)+" 月</font><font id='setMonthBtn' style='font-size: 12px; cursor: pointer;color: #b0b0b0;margin-left: 5px;'>< 选择月份</font></span><span style='margin-right: 10px; border:1px solid #d5d5d5; border-radius: 3px;padding:3px 5px; cursor: pointer;' id='clearBtn'>清空</span><span id='todayBtn' style='margin-right: 20px; border:1px solid #d5d5d5; border-radius: 3px;padding:3px 5px; cursor: pointer;'>今日</span><span id='prevMonthBtn' style='margin-right: 20px;cursor: pointer;font-size: 20px;'><</span><span id='nextMonthBtn' style='margin-right: 20px;cursor: pointer;font-size: 20px;'>></span></div>",s+="<div><div class='dayTitle'>日</div><div class='dayTitle'>一</div><div class='dayTitle'>二</div><div class='dayTitle'>三</div><div class='dayTitle'>四</div><div class='dayTitle'>五</div><div class='dayTitle'>六</div><div style='clear:both'></div></div>";var h=this.date;h.setDate(1);for(a=0;a<h.getDay();a++)s+="<div class='dateSpan dateSpanNo'> </div>";var c=[31,28,31,30,31,30,31,31,30,31,30,31];c[1]=this.date.getFullYear()%4==0&&this.date.getFullYear()%100!=4||this.date.getFullYear()%400==0?29:28;for(a=1;a<=c[this.date.getMonth()];a++)s+="<div class='"+(a==this.selectedDate.getDate()&&this.selectedDate.getMonth()==this.date.getMonth()&&this.selectedDate.getFullYear()==this.date.getFullYear()?"dateSpan dateSpanActive":"dateSpan")+" days'>"+a+"</div>"}if(s+="<div style='clear:both;'></div>",s+="</div></div></div>",n+=".dateSpan:hover{background:#f4f4f4;}",n+=".dateSpanNo{cursor: default;}",n+=".dateSpanNo:hover{background:#fff;}",n+=".dateSpanActive{background:#00b7ee;color:#fff;}",n+=".dateSpanActive:hover{background:#328dd8;}",n+="</style>",$("#"+this.id).html(e+s+n),"year"==t&&$("#dateContent").scrollTop(($("#dateContentBox").height()-$("#dateContent").height())*((this.date.getFullYear()-this.yearRange[0])/(this.yearRange[1]-this.yearRange[0]))),$(".years").click(function(){u.date.setFullYear($(this).html()),u.show("month","year"==u.type),"year"==u.type&&u.action&&u.action(u.toString())}),$(".months").click(function(){u.date.setMonth($(this).html().replace("月","")-1),u.show("","month"==u.type),"month"==u.type&&u.action&&u.action(u.toString())}),$(".days").click(function(){u.selectedDate.setFullYear(u.date.getFullYear(),u.date.getMonth(),$(this).html()),0<u.timeType.length?u.show("time",!1):(u.show("",!0),u.action&&u.action(u.toString()))}),$("#inputYear").click(function(){var t=u.date.getFullYear();S.confirmx('<input type="text" id="inputData" style="border:1px solid #e4e4e4;padding:5px;" maxlength="4" value="'+t+'" /><div style="display:none;color:#ff0000;" id="inputDataErr">输入错误,必须为'+u.yearRange[0]+"-"+u.yearRange[1]+"之间的整数</div>",function(){var t=parseInt($("#inputData").val());u.date.setFullYear(t),u.selectedDate.setFullYear(t),$("#inputYear").html(t+" 年"),u.show("", "year" == u.type)},{_h:170,title:"输入年份",verifyFn:function(){var t=parseInt($("#inputData").val());if($("#inputDataErr").hide(),t>=u.yearRange[0]&&t<=u.yearRange[1])return!0;$("#inputDataErr").show()}})}),$("#inputMonth").click(function(){var t=u.date.getMonth()+1;S.confirmx('<input type="text" id="inputData" style="border:1px solid #e4e4e4;padding:5px;" maxlength="2" value="'+t+'" /><div style="display:none;color:#ff0000;" id="inputDataErr">输入错误,必须为1-12之间的整数</div>',function(){var t=parseInt($("#inputData").val())-1;u.date.setMonth(t),u.selectedDate.setMonth(t),$("#inputMonth").html(t+1+" 月"),u.show("","month"==u.type)},{_h:170,title:"输入月份",verifyFn:function(){var t=parseInt($("#inputData").val())-1;if($("#inputDataErr").hide(),0<=t&&t<=11)return!0;$("#inputDataErr").show()}})}),$("#setMonthBtn").click(function(){u.show("month")}),$("#setYearBtn").click(function(){u.show("year")}),$("#setDaysBtn").click(function(){u.show("")}),$("#timeOk").click(function(){u.action&&u.action(u.toString())}),$("#clearBtn").click(function(){u.action&&u.action("")}),$("#todayBtn").click(function(){var t=new Date;u.date.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),u.selectedDate.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),u.show(),u.action&&u.action(u.toString())}),$("#prevMonthBtn").click(function(){var t=u.date.getFullYear(),i=u.date.getMonth();0==i?t==u.yearRange[0]?S.log("不能超过最低年限"):(t--,i=11):i--,u.date.setFullYear(t,i),u.show("",!0)}),$("#nextMonthBtn").click(function(){var t=u.date.getFullYear(),i=u.date.getMonth();11==i?t==u.yearRange[1]?S.log("不能超过最高年限"):(t++,i=0):i++,u.date.setFullYear(t,i),u.show("",!0)}),0<u.timeType.length)for(a=0;a<u.timeType.length;a++)g(a+1),p(a+1);function p(o){var a=23,t="",i="";switch(o){case 1:t="timeHoursInput",i="timeHoursSlider";break;case 2:a=59,t="timeMinutesInput",i="timeMinutesSlider";break;case 3:a=59,t="timeSecondsInput",i="timeSecondsSlider"}$("#"+t).keydown(function(){var i=$(this).val();$(this).bind("keyup",function(){var t=parseInt($(this).val()||0);/\d/.test(t)&&0<=t&&t<=a?u.timeType[o-1]=t:u.timeType[o-1]=i,g(o),$(this).unbind("keyup")})}),$("#"+i+" .timeSliderAction_block").mousedown(function(t){var n=$("#"+i+" .timeSliderAction_active").width(),s=t.clientX;function e(t){var i=n+(t.clientX-s);i=(i=r<i?r:i)<0?0:i;var e=Math.ceil(i/r*a);u.timeType[o-1]=e,g(o)}$("body").addClass("unSelect"),$(window).bind("mousemove",e),$(window).bind("mouseup",function t(i){$("body").removeClass("unSelect");$(window).unbind("mousemove",e);$(window).unbind("mouseup",t)})})}function g(t){u.timeType[t-1]=9<u.timeType[t-1]?parseInt(u.timeType[t-1]):"0"+parseInt(u.timeType[t-1]);var i=0,e="",n="";switch(t){case 1:i=u.timeType[0]/24*r,e="timeHoursInput",n="timeHoursSlider";break;case 2:i=u.timeType[1]/60*r,e="timeMinutesInput",n="timeMinutesSlider";break;case 3:i=u.timeType[2]/60*r,e="timeSecondsInput",n="timeSecondsSlider"}$("#"+e).val(u.timeType[t-1]),$("#"+n+" .timeSliderAction_active").width(i),$("#"+n+" .timeSliderAction_block").css("margin-left",i-9+"px")}},this.close=function(){S.Calendar.isShow=!1,$("#"+this.id+"_cover").remove(),$("#"+this.id).remove()}},S.Calendar.isShow=!1,
    S.Area = function(t) {
        var n = t.obj,
        s = t.type||3,
        i = t.lineNum,
        o = this;
        this.id = (new Date).only(),
        this.flog = 0,
        this.obj = n,
        this.type = s,
        this.province = null,
        this.provinceT = null,
        this.readonly = t.readonly,
        this.town = null,
        this.townT = null,
        this.district = null,
        this.districtT = null,
        this.Province = null,
        this.ProvinceT = null,
        this.value = "",
        this.reload = function(){
            if (!o.readonly) {
                n.off().click(function(e) {
                    var WinHeight = $(window).height();
                    var top = WinHeight/2+50<e.pageY;
                    $(".area").remove();
                    n.prev(".data_error").hide();
                    o.open(o.value,top);
                })
            }
        },
        this.load = function(fn) {
            var t = document.createElement("script");
            t.type = "text/javascript",
            t.src = "js/AreaData.js",
            document.body.appendChild(t),
            t.onload = function() {
                if (fn) {
                    fn(window.AreaData)
                }
            }
            this.reload()
        },
        window.AreaData || this.load(),
        this.load(),
        this.setData = function(t) {
            var i = this.Province?"<span style=''></span>":"<span style='padding:3px 15px;border:1px solid #e4e4e4;margin-left:10px;cursor:pointer;'>" + (this.province ? AreaData[this.province][0] : "选择省") + "</span>"
            3 == this.flog ? (i += "<span style='padding:3px 15px;border:1px solid #e4e4e4;margin-left:10px;cursor:pointer;'>" + (this.town ? AreaData[this.town][0] : "选择市") + "</span>", i += "<span style='padding:3px 15px;border:1px solid #e4e4e4;margin-left:10px;cursor:pointer;'>" + (this.district ? AreaData[this.district][0] : "选择区") + "</span>") : 2 == this.flog && (i += "<span style='padding:3px 15px;border:1px solid #e4e4e4;margin-left:10px;cursor:pointer;'>" + (this.town ? AreaData[this.town][0] : "选择市") + "</span>"),
            $("#areaSpan" + this.id).find("div").html(i),
            $("#areaSpan" + this.id).find("span").eq(o.flog - 1).css({
                background: "#00b7ee",
                color: "#fff"
            }),
            $("#areaSpan" + this.id).find("span").eq(0).click(function() {
                o.town = null,
                o.district = null,
                o.flog = 1,
                o.setData(1)
            }),
            $("#areaSpan" + this.id).find("span").eq(1).click(function() {
                o.district = null,
                o.flog = 2,
                o.setData(o.town)
            });
            var e = "";
            for (var n in AreaData) AreaData[n][1] == t && (e += "<div style='width:100px;line-height:30px;height:30px;overflow:hidden;border:1px solid #fff;overflow:hidden;float:left;cursor:pointer;' vaule='" + n + "' title='" + AreaData[n][0] + "'>" + AreaData[n][0] + "</div>");
            e += "<div class='clear'></div>",
            $("#areaContent" + this.id).html(e),
            $("#areaContent" + this.id).find("div").each(function(t) {
                $(this).mouseover(function() {
                    $(this).css("color", "#ff0000")
                }),
                $(this).mouseout(function() {
                    $(this).css("color", "#666")
                }),
                $(this).click(function() {
                    var t = $(this).attr("vaule"),
                    te = $(this).attr("title");
                    switch (o.flog) {
                    case 1:
                        o.province = t,
                        o.provinceT = te,
                        2 <= o.type ? (o.flog++, o.town = null, o.district = null, o.setData(t)) : o.toString();
                        break;
                    case 2:
                        o.town = t,
                        o.townT = te,
                        3 <= o.type ? (o.flog++, o.district = null, o.setData(t)) : o.toString();
                        break;
                    case 3:
                        o.district = t,
                        o.districtT = te,
                        o.toString();
                    }
                })
            })
        },
        this.val = function(t) {
            if (!t) return n.val();
            n.val(t)
        },
        this.toString = function() {
            var t = "";
            this.province && (t += AreaData[this.province][0]);
            this.town && (t += AreaData[this.town][0]);
            this.district && (t += AreaData[this.district][0]);
            if (this.ProvinceT) {
                t = this.ProvinceT+t;
            };
            n.val(t);
            this.close();
        },
        i = !i || i < 4 ? 4 : i,
        this.width = 100 * i + 40,
        this.height = 200,
        this.open = function(t,top) {
            this.district = null;
            this.town = null;
            this.province = null;
            S.creatCover({
                id: this.id + "_cover",
                obj: window,
                zIndex: S.zIndex(4),
                opacity: 0,
                background: "#ffffff",
                position: "fixed",
                unScroll0: !0
            });
            var topPosition = top ? (n.offset().top + n.height() - 260) :(n.offset().top + n.height());
            var i = "<div id='areaBox" + this.id + "' style='border:1px solid #ccc;overflow:hidden;width:" + this.width + "px;background:#fff;position:absolute;left:" + n.offset().left + "px;top:" + topPosition + "px;z-index:" + S.zIndex(4) + ";'>";
            i += "<div id='areaSpan" + this.id + "' style='border-bottom:1px solid #e4e4e4;line-height:40px;overflow:hidden;height:40px;text-align:right;'><div style='float:left;'>",
            i += "</div><font style='padding:2px 7px; border:1px solid #e4e4e4;cursor:pointer;margin-right:10px;' id='reset" + this.id + "'>清空</font><span id='close" + this.id + "' style='margin-right:10px;cursor:pointer;'>X</span></div>",
            i += "<div id='areaContent" + this.id + "' style='overflow:auto;height:" + (this.height - 40) + "px;margin-left:10px;padding-top:10px;padding-bottom:10px;'></div>",
            i += "</div>",
            $("body").append(i),
            $("#close" + this.id + ",#" + this.id + "_cover").click(function() {
                o.close()
            }),
            $("#reset" + this.id).click(function() {
                n.val('');
                $("#" + o.id + "_cover").remove();
                $("#areaBox" + o.id).remove();
                n.prev(".data_error").hide()
            }),
            this.flog = this.district ? 3 : this.town ? 2 : 1;
            var e = this.district ? this.town: this.province ? this.province: 1;
            if (s == '1') {
                e = 1
            };
            if (this.Province) {
                e = this.Province;
            };
            this.setData(e.toString())
        },
        this.close = function() {
            var townT = o.townT||'';
            var closeObj = this.ProvinceT?"<input class='area area1' style='display:none' value='" + o.ProvinceT + "'/><input class='area area2' style='display:none' value='" + o.provinceT + "'/>":"<input class='area area1' style='display:none' value='" + o.provinceT + "'/><input class='area area2' style='display:none' value='" + townT + "'/>"
            o.obj.parent().append(closeObj);
            $("#" + this.id + "_cover").remove(),
            $("#areaBox" + this.id).remove(),
            n.prev(".data_error").hide()
        };
    },
    S.Radio=function(t,i){i=i||{},this.objs=t/*,this.activeObj=t[0]*/;var ii;this.objs.each(function(i,t){if($(t).prop('checked')) ii=i});this.activeObj=ii!=undefined?t[ii]:'';var e=this;this.changeFn=i.changeFn||"";var n=!1;this.setReadOnly=function(t){n=t,this.objs.each(function(){$(this).attr("readonly","readonly")})},this.objs.click(function(){if(n)return!1;e.activeObj=$(this)[0],e.show()}),this.show=function(){this.objs.each(function(){$(this)[0].checked=e.activeObj.value==$(this)[0].value}),this.changeFn&&this.changeFn(this.val())},this.val=function(t){if(null==t)return $(this.activeObj).val();this.objs.each(function(){$(this).val()==t&&(e.activeObj=$(this)[0],e.show())})},this.show()},S.Checkbox=function(o,a){this.setReadOnly=function(t){t;for(var i=0;i<o.length;i++)o[i].attr("readonly","readonly")},this.val=function(t){if(null==t){for(var i=[],e=0;e<o.length;e++)o[e].checked&&i.push(o[e].value);return a?i:i.join(",")}var n=a?t:t.split(",");for(e=0;e<n.length;e++)for(var s=0;s<o.length;s++)o[s].value==n[e]&&(o[s].checked=!0)}},S.download=function(t,i){var e=(i=i||{}).meth?i.meth:"",n=i.endTime?i.endTime:1e4,s=i.endFn?i.endFn:"";if("iframe"==e){var o="downIframe"+(new Date).only();$("body").append("<iframe class='downIframe' id='"+o+"' style='display: none;' src='"+t+"'></iframe>"),setTimeout(function(){$("#"+o).remove(),s&&s(o)},n)}else window.open(t,"_blank"),s&&s()},S.Windows=function(t){t=t||{},this.id="Windows"+(new Date).only(),this.width=t.width||500,this.height=t.height||300,this.title=t.title||"新建弹窗",this.content=t.content||"",this.bottom=t.bottom||"",this.closeBtn=0!=t.closeBtn,this.closeFun=0!=t.closeFun,this.cover=0!=t.cover,this.coverArgs=t.coverArgs||{},this.coverClose=t.coverClose||!1,this.cancleFn=t.cancleFn||"",this.style=t.style||"",this.styles=t.styles||{},this.drag=0!=t.drag,this.titleHeight=0<=t.titleHeight?t.titleHeight:30,this.bottomHeight=0<=t.bottomHeight?t.bottomHeight:40;var o=this;this.open=function(){this.width>$(window).width()&&(this.width=$(window).width()),this.height>$(window).height()&&(this.height=$(window).height());var t=$(window).scrollTop();this.cover&&S.creatCover({id:this.id+"_cover",obj:window,zIndex:S.zIndex(4),opacity:null==this.coverArgs.opacity?.5:this.coverArgs.opacity,background:this.coverArgs.background||"#000000",position:"fixed"});var i="<div id='"+this.id+"_top'><b id='"+this.id+"_top_title'>"+this.title+"</b>"+(this.closeBtn?"<span id='"+this.id+"_close'>X</span>":"")+"</div>",e="<div id='"+this.id+"_center'><div id='"+this.id+"_content'>"+this.content+"</div></div>",n=this.bottom?"<div id='"+this.id+"_bottom'>"+this.bottom+"</div>":"",s="<style>";s+="#"+this.id+"{border:1px solid #e4e4e4;border-radius:3px;width:"+this.width+"px;background:#fff;position: fixed;z-index:"+S.zIndex(4)+"; left:"+($(window).width()-this.width)/2+"px;top:"+($(window).height()-this.height)/2+"px;"+(this.styles&&this.styles.box?this.styles.box:"")+"}",s+="#"+this.id+"_top{overflow:hidden;height:"+this.titleHeight+"px; text-align: right;line-height: "+this.titleHeight+"px; background:#f9f9f9;"+(this.styles&&this.styles.top?this.styles.top:"")+"}",s+="#"+this.id+"_top_title{float: left;margin-left:10px;"+(this.styles&&this.styles.top_title?this.styles.top_title:"")+"}",s+="#"+this.id+"_close{margin-right: 10px;cursor: pointer; font-family: Arial;"+(this.styles&&this.styles.close?this.styles.close:"")+"}",s+="#"+this.id+"_center{border-top:1px solid #e4e4e4;"+(this.styles&&this.styles.center?this.styles.center:"")+"}",s+="#"+this.id+"_content{height:"+(this.height-this.titleHeight-this.bottomHeight-12)+"px;overflow:auto;"+(this.styles&&this.styles.content?this.styles.content:"")+"}",s+="#"+this.id+"_bottom{border-top:1px dashed #e4e4e4;height:"+this.bottomHeight+"px;overflow: hidden;"+(this.styles&&this.styles.bottom?this.styles.bottom:"")+"}",s+=this.style?this.style.replaceAll("{this_id}",this.id):"",s+="</style>",$("body").append("<div class='boxShadow' id='"+this.id+"'>"+i+e+n+s+"</div>"),$(window).scrollTop(t),this.bodyScrollNo&&($("body").attr("scroll","no"),$("body").css("overflow","hidden")),$("#"+this.id+"_close").click(function(){if(o.closeFun) o.closeFun();o.close()}),this.coverClose&&$("#"+this.id+"_cover").click(function(){o.close()}),this.drag&&S.Drag({obj:$("#"+this.id+"_top"),target:$("#"+this.id)})},this.close=function(t){this.cancleFn&&this.cancleFn(t),$("#"+this.id).remove(),$("#"+this.id+"_cover").remove(),this.bodyScrollNo&&($("body").removeAttr("scroll"),$("body").css("overflow","visible"))}},S.Drag=function(t){var i=(t=t||{}).obj,n=t.target;i.css({cursor:"move"});var s=0,o=0,a=0,r=0,l=$(window).width(),d=$(window).height(),h=n.width(),c=n.height();function e(t){var i=a+(t.clientX-s),e=r+(t.clientY-o);i=i<0?0:l-h<i?l-h:i,e=e<0?0:d-c<e?d-c:e,n.css({left:i+"px",top:e+"px"})}function p(t){$("body").removeClass("unSelect"),$(window).unbind("mousemove",e),$(window).unbind("mouseup",p)}i.bind("mousedown",function(t){s=t.clientX,o=t.clientY,a=n.offset().left,r=n.offset().top,$("body").addClass("unSelect"),$(window).bind("mousemove",e),$(window).bind("mouseup",p)})},S.MouseOverShow=function(n,s,o){o=o||{};var a=this,r=(new Date).only();function l(){s.mouseover(function(){clearTimeout(a.timer)}),s.mouseout(function(){a.timer=setTimeout(function(){o.string?(s.remove(),s=""):s.hide(),a.timer=""},300)})}n.mouseover(function(){if(a.timer)clearTimeout(a.timer);else if(o.string){var t=n.offset().top+n.height()+8,i=n.offset().left,e="position:absolute;left:"+i+"px;top:"+t+"px;border-radius:5px;width:180px;padding:16px 0px 16px 16px;background:#000;color:#fff;line-height:24px;background:#000;color:#fff;z-index:"+S.zIndex(4);s='<div class="mouseOverShow" id="mouseOverShow'+r+'" style="'+e+(o.style||"")+'">'+o.string+"</div>",$("body").append(s),o.init&&o.init(r),(s=$("#mouseOverShow"+r)).height()+t>$(window).height()&&s.css({top:"auto",bottom:"0px"}),s.width()+i>$(window).width()&&s.css({left:"auto",right:"0px"}),l()}else s.show()}),n.mouseout(function(){a.timer=setTimeout(function(){o.string?(s.remove(),s=""):s.hide(),a.timer=""},300)}),s&&l()},S.ColorPicker=function(t,i,e){e=e||{};var n=this;this.id=(new Date).only(),this.colors=e.colors||["#ff3333","#ff33cc","#3333ff","#339933","#cccc33","#ff9933","#000000","#333333","#666666","#999999","#cccccc","#ffffff"];for(var s="",o=0;o<this.colors.length;o++)s+='<div class="pickerColors" title="'+this.colors[o]+'" style="border:1px solid #fff;margin:0px 8px 8px 0px;width:18px;height:18px;float:left;background-color:'+this.colors[o]+'"></div>';var a=e.clear||'<span id="clear'+this.id+'" style="cursor:pointer;margin-right:16px;font-size:12px;">清空</span>';new S.MouseOverShow(t,"",{string:'<div style="max-width:180px;" id="colorpicker'+this.id+'">'+s+'<div style="clear:both;"></div><div style="text-align:right;">'+a+"</div></div>",init:function(t){$("#colorpicker"+n.id).find(".pickerColors").each(function(t){$(this).click(function(){i(n.colors[t])})}),$("#clear"+n.id).click(function(){i("")})},style:e.style+";padding-bottom:8px;"})},S.JSONP=function(t,i){var e=(new Date).only();window["JSONP"+e]=function(t){try{t=JSON.parse(t)}catch(t){}i(t),$("#JSONP"+e).remove(),window["JSONP"+e]=null},t+=(-1<t.indexOf("?")?"&":"?")+"callback=JSONP"+e,$("body").append('<div id="JSONP'+e+'"><script type="text/javascript" src="'+t+'"><\/script></div>')},S.Imgedit=function(d,h,c,p,t){var g=this;if(this.title="图片编辑器",this.data="",this.dataBlob="",this.width=d,this.height=h,this.maxHeight=$(window).height()-270,this.radius=p||0,this.scale=c,this.img="",this.imgString="",this.imgSize=[],this.imgMove=[0,0],this.compress=.92,this.canvas="",this.canvasObj="",this.canvasImg="",this.canvasImgObj="",this.mimeType="jpeg",this.loading=new S.loading({opacity:0}),this.show=function(){if(this.img){var t=this.imgSize[0]*this.imgSize[2]/100,i=this.imgSize[1]*this.imgSize[2]/100;this.canvasObj.width=1e3,this.canvasImgObj.width=this.width,this.canvasImgObj.height=this.height,-1<"|jpg|jpeg|bmp|".indexOf(this.mimeType)&&(this.canvasImg.fillStyle="#ffffff",this.canvasImg.fillRect(0,0,this.width,this.height));var e=[[this.radius,0],[0,0],[0,this.radius]];this.canvasImg.moveTo(e[0][0],e[0][1]),this.canvasImg.arcTo(e[1][0],e[1][1],e[2][0],e[2][1],this.radius),e=[[0,this.height-this.radius],[0,this.height],[this.radius,this.height]],this.canvasImg.lineTo(e[0][0],e[0][1]),this.canvasImg.arcTo(e[1][0],e[1][1],e[2][0],e[2][1],this.radius),e=[[this.width-this.radius,this.height],[this.width,this.height],[this.width,this.height-this.radius]],this.canvasImg.lineTo(e[0][0],e[0][1]),this.canvasImg.arcTo(e[1][0],e[1][1],e[2][0],e[2][1],this.radius),e=[[this.width,this.radius],[this.width,0],[this.width-this.radius,0]],this.canvasImg.lineTo(e[0][0],e[0][1]),this.canvasImg.arcTo(e[1][0],e[1][1],e[2][0],e[2][1],this.radius),this.canvasImg.closePath(),this.canvasImg.clip(),this.canvasImg.drawImage(this.img,(this.width-t)/2+this.imgMove[0],(this.height-i)/2+this.imgMove[1],t,i),this.canvas.moveTo(0,0),this.canvas.lineTo(1e3,0),this.canvas.lineTo(1e3,this.maxHeight),this.canvas.lineTo(0,this.maxHeight),this.canvas.closePath();var n=S.setImgSize({_w:1e3,_h:this.maxHeight,w:this.width,h:this.height});this.canvas.moveTo(n[3],n[2]),this.canvas.lineTo(n[3],n[2]+n[1]),this.canvas.lineTo(n[3]+n[0],n[2]+n[1]),this.canvas.lineTo(n[3]+n[0],n[2]),this.canvas.closePath(),this.canvas.fillStyle="rgba(0,0,0,1)",this.canvas.fill(),this.canvas.drawImage(this.canvasImgObj,n[3],n[2],n[0],n[1]),this.data=this.canvasImgObj.toDataURL("image/"+this.mimeType,this.compress),this.dataBlob=S.dataURLtoBlob(this.data);var s=S.fileSize(this.dataBlob.size),o=this.maxSize&&this.maxSize<this.dataBlob.size?"<font style='color:#ff0000;margin-left:5px;'>过大</font>":"";$("#compress_slipText").html("("+S.fileSize(this.dataBlob.size)+o+")"),$("#imgEditBoxImg").attr("title",this.width+"*"+this.height+"  "+s)}},this.prevView=function(t){var i=new Image;i.onload=function(){var t=S.setImgSize({_w:1e3,_h:g.maxHeight,w:g.width,h:g.height});g.canvas.drawImage(i,t[3],t[2],t[0],t[1])},i.src=this.data},this.Slip=function(i,t,e,n,s){var o=this,a=0,r=t.width(),l=100,d=l,h=r/l;function c(t){var i=t.clientX-a;l=(l=100<(l=Math.ceil(i/h)+d)?100:l)<0?0:l,o.set()}function p(t){$("body").removeClass("unSelect"),$(window).unbind("mousemove",c),$(window).unbind("mouseup",p),o.set(),s&&s()}i.bind("mousedown",function(t){d=l,a=t.clientX,$("body").addClass("unSelect"),$(window).bind("mousemove",c),$(window).bind("mouseup",p)}),this.set=function(t){l=t||l,i.css("margin-left",l+"%"),e.html(l+"%"),n(l)}},this.imgSlip="",this.compressSlip="",this.editType={scale:!0,width:!0,height:!0,radius:!0,imgSlip:!0,compressSlip:!0,mimeType:!0,recom:!0},t)for(var i in t)this.editType[i]=t[i];this.open=function(t,e){g.loading.open&&g.loading.open(),g.imgString=S.getBlobURL(t),this.yuantu=!1,g.img=new Image,g.img.onload=function(){g.loading.close&&g.loading.close(),c||(g.editType.scale=!1,d&&g.editType.width&&h&&g.editType.height&&(g.editType.width=!1,g.editType.height=!1));var t=1920;t=(g.img=this).width>t?t:this.width,d=d||t,g.width=d;var l=this.width<=d?100:d/this.width*100;g.imgSize=[this.width,this.height,this.width<d?100:l],h=h||parseInt(this.height*l/100),g.height=h,g.radius=p||0,g.radius=g.radius>=g.width/2||g.radius>=g.height/2?Math.min(g.width,g.height)/2:g.radius,g.canvasObj=document.createElement("canvas"),g.canvasObj.width=this.width,g.canvasObj.height=g.maxHeight,g.canvasImgObj=document.createElement("canvas"),g.canvasImgObj.width=g.width,g.canvasImgObj.height=g.height,g.canvas=g.canvasObj.getContext("2d"),g.canvasImg=g.canvasImgObj.getContext("2d"),g.html="<div class='imgEditBox'>",g.html+="<div class='imgEditBoxImg' id='imgEditBoxImg'></div>",g.html+="<div class='imgEditBoxEdit'>",g.html+="<div class='imgEditBoxEdit_size'>";var i=g.editType.scale?"<font style='color:#3ec0ef;'>(比例 "+c[0]+":"+c[1]+")</font>":"";i=g.editType.scale?"<input type='checkbox' checked"+(g.editType.scale?"":" disabled='true'")+" id='imgEditCheck' />固定比例"+i:"",g.html+="<div class='imgEditBoxEdit_size_check'>"+i+"</div>",g.html+="<div class='imgEditBoxEdit_size_css'>宽度(px):<input type='text'"+(g.editType.width?"":" disabled='true'")+" id='imgEditSetWidth' value='"+d+"' />"+(g.editType.width?"<font style='color:#c4c4c4;font-size:12px;'>最大"+d+"</font>":"")+"</div>",g.html+="<div class='imgEditBoxEdit_size_css'>高度(px):<input type='text'"+(g.editType.height?"":" disabled='true'")+" id='imgEditSetHeight' value='"+g.height+"' />"+(g.editType.height?"<font style='color:#c4c4c4;font-size:12px;'>最大"+g.height+"</font>":"")+"</div>",g.html+="<div class='imgEditBoxEdit_size_css'>圆角(px):<input type='text'"+(g.editType.radius?"":" disabled='true'")+" id='imgEditSetRadius' value='"+(g.radius?g.radius:0)+"' /></div>",g.html+="</div>",g.html+="<div class='imgEditBoxEdit_scale'>",g.html+="<div class='imgEditBoxEdit_slipBox'>",g.html+="<div class='imgEditBoxEdit_slipBox_name'>原图压缩:</div>",g.html+="<div class='imgEditBoxEdit_slipBox_slip'><div class='imgEditBoxEdit_slipBox_slip_bg' id='img_slipClick'><div class='imgEditBoxEdit_slipBox_slip_n' id='img_slipMove'><div class='imgEditBoxEdit_slipBox_slip_n_t'><font id='img_slipPre' style='color:#3ec0ef;'>100%</font><font style='color:#ECECEC;font-size:12px;' id='img_slipText'>(1500*1200)</font></div><div class='imgEditBoxEdit_slipBox_slip_n_c'></div></div></div><div class='imgEditBoxEdit_slipBox_slip_p'><div style='width:20px;float:left;overflow:hidden;'>0%</div><div style='text-align:right;width:320px;float:right;'><div style='width:270px;float:left;text-align:center;'><span style='margin-left:25px;'>50%</span></div><div style='width:50px;float:right;text-align:right;overflow:hidden;'>100%</div></div></div></div>",g.html+="<div class='clear'></div>",g.html+="</div>",g.html+="<div class='imgEditBoxEdit_slipBox'>",g.html+="<div class='imgEditBoxEdit_slipBox_name'>质　　量:</div>",g.html+="<div class='imgEditBoxEdit_slipBox_slip'><div class='imgEditBoxEdit_slipBox_slip_bg' id='compress_slipClick'><div class='imgEditBoxEdit_slipBox_slip_n' id='compress_slipMove'><div class='imgEditBoxEdit_slipBox_slip_n_t'><font id='compress_slipPre' style='color:#3ec0ef;'>100%</font><font style='color:#cbcaca;font-size:12px;' id='compress_slipText'>(质量越高,图片越大)</font></div><div class='imgEditBoxEdit_slipBox_slip_n_c'></div></div></div><div class='imgEditBoxEdit_slipBox_slip_p'><div style='width:20px;float:left;overflow:hidden;'>0%</div><div style='text-align:right;width:320px;float:right;'><div style='width:270px;float:left;text-align:center;'><span style='margin-left:25px;'>50%</span></div><div style='width:50px;float:right;text-align:right;overflow:hidden;'>100%</div></div></div></div>",g.html+="<div class='clear'></div>",g.html+="</div>",g.html+="</div>",g.html+="<div class='imgEditBoxEdit_recom'><div id='imgEditRecom'>推荐<br />设置</div></div>",g.html+="<div class='clear'></div>",g.html+="</div>",g.html+="<div style='position:absolute;margin-left:45px;'><input type='checkbox' id='checkMimeType' />背景透明<span style='font-size:12px;color:#c4c4c4;'>-说明:设置为背景透明图片保存为PNG格式质量高占用空间大，不透明保存为JPEG格式，质量可调节</span><font style='color:#ff0000;margin-left:70px;'>使用原图</font><input type='checkbox' id='yuantu' /></div>",g.html+="<style>",g.html+=".imgEditBox{line-height:40px;}",g.html+=".imgEditBoxImg{background:#fff;height:"+g.maxHeight+"px;overflow:hidden;cursor:move;}",g.html+=".imgEditBoxEdit{text-align:left;height:180px;overflow:hidden;}",g.html+=".imgEditBoxEdit_size{width:300px;float:left;}",g.html+=".imgEditBoxEdit_scale{width:470px;float:left;margin-top:20px;}",g.html+=".imgEditBoxEdit_recom{width:150px;float:left;margin-left:30px;}",g.html+=".imgEditBoxEdit_size_check{margin-left:110px;margin-top:10px;height:40px;}",g.html+=".imgEditBoxEdit_size_css{margin-left:50px;}",g.html+=".imgEditBoxEdit_size_css input{ width:100px;height:30px;line-height:30px;padding:0px 5px;margin:0px 5px;border:1px solid #dcdcdc;}",g.html+=".imgEditBoxEdit_size_css input:hover{border-color:#3ec0ef;}",g.html+="#imgEditRecom{width:123px;padding:35px 0px;border-radius:5px;line-height:20px;text-align:center;border:1px solid #eae9e9;margin-top:45px;cursor:pointer;background:#fdfdfd;}",g.html+="#imgEditRecom:hover{background:#fff;}",g.html+=".imgEditBoxEdit_slipBox{height:70px;margin-top:10px;}",g.html+=".imgEditBoxEdit_slipBox_name{width:70px;float:left;line-height:70px;}",g.html+=".imgEditBoxEdit_slipBox_slip{width:320px;float:left;font-family:Arial;}",g.html+=".imgEditBoxEdit_slipBox_slip_n{margin-left:100%;}",g.html+=".imgEditBoxEdit_slipBox_slip_n_t{line-height:16px;position:absolute;margin-top:-18px;}",g.html+=".imgEditBoxEdit_slipBox_slip_n_c{width:12px;height:24px;background:#3ec0ef;cursor:pointer;}",g.html+=".imgEditBoxEdit_slipBox_slip_bg{background:url('images/imgEditLine.jpg') left 7px repeat-x;margin-top:23px;}",g.html+=".imgEditBoxEdit_slipBox_slip_p{line-height:20px;width:340px;font-size:12px;}",g.html+="</style>",g.html+="</div>",S.confirmx(g.html,function(){e(!1===g.yuantu&&g.data)},{title:g.title,_w:1e3,_h:g.maxHeight+262,bodyScrollNo:!0,initFn:function(){var t=0;$("#yuantu").change(function(){g.yuantu=this.checked}),$("#imgEditCheck").change(function(){if(!g.editType.scale)return!1;this.checked?(g.scale=c,1==t?(g.height=g.scale[0]/g.scale[1]*g.width,$("#imgEditSetHeight").val(g.height)):2==t&&(g.width=g.scale[1]/g.scale[0]*g.height,$("#imgEditSetWidth").val(g.height)),(g.radius>=g.height||g.radius>=g.width)&&(g.radius=Math.min(g.width,g.height)/2,$("#imgEditSetRadius").val(g.radius))):g.scale="",g.show(),g.prevView()}),$("#imgEditSetWidth").keyup(function(){if(!g.editType.width)return!1;t=1,0<=this.value&&this.value<=d?(g.width=- -this.value,g.height=g.scale?g.scale[1]/g.scale[0]*g.width:g.height,(g.radius>=g.height||g.radius>=g.width)&&(g.radius=Math.min(g.width,g.height)/2,$("#imgEditSetRadius").val(g.radius)),$("#imgEditSetHeight").val(g.height)):this.value=g.width,g.show(),g.prevView()}),$("#imgEditSetHeight").keyup(function(){if(!g.editType.height)return!1;t=2,0<=this.value&&this.value<=h?(g.height=- -this.value,g.width=g.scale?g.scale[0]/g.scale[1]*g.height:g.width,(g.radius>=g.height||g.radius>=g.width)&&(g.radius=Math.min(g.width,g.height)/2,$("#imgEditSetRadius").val(g.radius)),$("#imgEditSetWidth").val(g.width)):this.value=g.height,g.show(),g.prevView()}),$("#imgEditSetRadius").keyup(function(){if(!g.editType.radius)return!1;0<=this.value?g.radius=this.value>=g.width/2||this.value>=g.height/2?Math.min(g.width,g.height)/2:- -this.value:this.value=g.radius,g.show(),g.prevView()}),g.imgSlip=new g.Slip($("#img_slipMove"),$("#img_slipClick"),$("#img_slipPre"),function(t){g.imgSize[2]=t,$("#img_slipText").html("("+Math.ceil(g.imgSize[0]*t/100)+"*"+Math.ceil(g.imgSize[1]*t/100)+")"),g.show()},function(){g.prevView()}),g.compressSlip=new g.Slip($("#compress_slipMove"),$("#compress_slipClick"),$("#compress_slipPre"),function(t){g.compress=t/100,g.show()},function(){g.prevView()}),$("#checkMimeType").change(function(){this.checked?(g.mimeType="png",$("#imgEditBoxImg").css("background","url('images/imgEditBg.jpg')")):(g.mimeType="jpeg",$("#imgEditBoxImg").css("background","#fff")),g.show(),g.prevView()}),$("#imgEditRecom").click(function(){g.width=d,$("#imgEditSetWidth").val(g.width),g.radius=p||0,$("#imgEditSetRadius").val(g.radius),g.imgMove=[0,0],g.compressSlip.set(92);var t=g.imgSize[0]<=d?100:d/g.imgSize[0]*100;g.height=h,$("#imgEditSetHeight").val(g.height),g.imgSize[2]=t,g.imgSlip.set(t),g.prevView()}),$("#imgEditBoxImg").append(g.canvasObj);var n=0,s=0,o=0,a=0;function i(t){var i=t.clientX-n,e=t.clientY-s;g.imgMove=[o+i,a+e],g.show()}function e(t){$("body").removeClass("unSelect"),$(window).unbind("mousemove",i),$(window).unbind("mouseup",e),g.prevView()}function r(t){switch(t.which){case 38:g.imgMove[1]--;break;case 40:g.imgMove[1]++;break;case 37:g.imgMove[0]--;break;case 39:g.imgMove[0]++}g.show()}$("#imgEditBoxImg").bind("mousedown",function(t){n=t.clientX,s=t.clientY,o=g.imgMove[0],a=g.imgMove[1],$("body").addClass("unSelect"),$(window).bind("mousemove",i),$(window).bind("mouseup",e),$(window).bind("keydown",r)}),$("#imgEditBoxImg").bind("mouseout",function(){$(window).unbind("keydown",r)}),g.imgSlip.set(l),g.compressSlip.set(100*g.compress),g.prevView()}})},g.img.src=g.imgString}},S.formSubmit=function(s,o,a){a=a||{},window.iframeUrl=window.iframeUrl||"iframe.html",a.noBtns=a.noBtns||!0,a.cancleFn=function(){window._fromUpladFn=null},window._fromUpladFn=function(t){if(t)o(t),window._fromUpladFn=null,r&&r.close&&r.close();else{var i=$("#uploadIframe")[0].contentWindow,e="<form enctype='multipart/form-data' action='"+s+"' method='"+(a.meth?a.meth:"POST")+"' style='text-align:center;' id='uploadData'>";if(a.form&&(e+=a.form),a.formDataAppend)for(var n in a.formDataAppend)e+="<input type='hidden' id='"+n+"' value='"+a.formDataAppend[n]+"' name='"+n+"' />";e+="<input type='hidden' id='returnUrl' value='' name='returnUrl' />",e+="<div style='text-align:right;'><input value='确定' id='submit' style='margin-top:10px;border:none;background:#00b7ee;color:#fff;padding:3px 13px;cursor:pointer;' type='submit' /></div>",e+="</form>",i.formSubmit(e,{initFn:function(){a.formInitFn&&a.formInitFn(i,$("#submit",i.document),$("#uploadData",i.document))}})}};var r=S.confirmx("<iframe width='90%' src='"+iframeUrl+"?_="+(new Date).only()+"' scrolling='no' height='100' frameborder='0' border='0' marginwidth='0' marginheight='0' id='uploadIframe'></iframe>",function(){},a)},S.upload=function(m,x,w){var t=(w=w||{}).multiple?w.multiple:"",y=w.timesFn?w.timesFn:"",l=null!=w.maxSize?w.maxSize:10485760,b=w.header?w.header:[];if(w.Blob)return i(w.Blob,w.BlobMime),!1;if(0<$("#upLoadInput").size()&&$("#upLoadInput").remove(),window.ActiveXObject||"ActiveXObject"in window)return w.canIframe?(w.meth="POST",w.form="<div style='height:60px;'><div><input id='file' type='file' name='file' style='margin-top:25px;' /></div></div>",w.noCover=!0,w.title="上传文件",w.formInitFn=function(t,i,e){i.click(function(){if(""==$("#file",t.document).val())return S.alertx("请选择上传文件"),!1;i.hide(),setTimeout(function(){e.html("<div style='line-height:100px;'>上传中...请稍后</div>")},100),w.timesFn&&w.timesFn(iframeContent)})},S.formSubmit(m,x,w)):S.alertx("不支持的浏览器<br />请使用最新的谷歌或火狐浏览器<br />若您使用360浏览器请切换到极速模式浏览"),!1;function i(f,v){var t=w.imgEdit?w.imgEdit:void 0;if(t&&f[0]&&-1<f[0].type.indexOf("image")){var i=new S.Imgedit(t.width,t.height,t.scale,t.radius,t.editType);i.maxSize=l,i.open(f[0],function(t){t?e(i.dataBlob,i.mimeType):e()})}else e();function e(d,h){var c=new FormData,p=/^(.+)\.(.+)$/,g=[],t=[],u=[],i=[],e=$("#upLoadInput").attr("accept");e=e?e.toUpperCase():e,0==$("#upLoadBox").size()&&$("body").append("<div id='upLoadBox'></div>");for(var n=0;n<f.length;n++){var s=f[n].name||(new Date).only()+"."+v,o=h?s.replace(p,"$1."+h):s,a=d?d.size:f[n].size;e&&-1==e.indexOf(o.replace(p,"$2").toUpperCase())&&t.push(o),l&&l<a&&i.push(o)}if(0<t.length)return S.alertx(t.join(",")+" 文件类型不符，请选择正确的文件类型"),!1;if(0<i.length)return S.alertx(i.join(",")+" 过大,请重新选择"),!1;for(n=0;n<f.length;n++)r(n);function r(t){var i="upLoadId"+(new Date).only(),e=f[t].name||i+"."+v,n=h?e.replace(p,"$1."+h):e;if(g.push(f[t]),u.push(n),w.formDataAppend)for(var s in w.formDataAppend)"function"==typeof w.formDataAppend[s]?c.append(s,w.formDataAppend[s](f[t]),n):c.append(s,w.formDataAppend[s]);c.append("file",d||f[t],n);var o=n.replace(/^(.{1,10})(.*)$/,function(t,i,e){return 3<e.length?i+"...":t});$("#upLoadBox").append("<div class='upLoad' title='"+o+"' id='"+i+"'><span class='upLoad_name'>正在上传 "+o+"</span><div class='upLoad_loaded'></div><span class='upLoad_close' title='取消'>x</span></div>");var a=!1,r=new S.Ajax(m,function(t){a=!0,$("#"+i).find(".upLoad_name").html(t.errorMsg?o+" 上传失败,"+t.errorMsg:o+" 上传完成"),$("#"+i).find(".upLoad_loaded").css({animation:"none"}),$("#upLoadInput").remove(),x(t,g),setTimeout(l,5e3)},{header:b,loading:!0,meth:"POST",data:c,progress:function(t){$("#"+i).find(".upLoad_loaded").css({width:Math.round(t.loaded/t.total*100)+"%"})}});function l(){$("#"+i).animate({opacity:0},1e3,function(){$("#"+i).remove(),0==$(".upLoad").size()&&$("#upLoadBox").remove()})}y&&y(i),w.beforeAction?w.beforeAction(c,f[t].name?f[t]:{name:e},function(){r.action()},r):r.action(),$("#"+i).find(".upLoad_close").click(function(){a?l():r.abort()})}}}$("body").append("<input "+t+" id='upLoadInput' type=\"file\" style='display:none;' />"),$("#upLoadInput").click(),$("#upLoadInput").change(function(){this.value&&i(document.getElementById("upLoadInput").files)})},S.TreeModel=function(o){var u=this;this.levelMax=3,this.data={},this.SQLite="",this.dataModel={},this.dataModelConfig={},this.levelConfig=[],this.editable=!1,this.loadFn="",this.errorFn="",this.getAjax=function(t,i,e,r,n){var s=S.clone(this.dataModelConfig.confirmx),o="",l=[],d="",h={};for(var a in 1==t?d=u.levelConfig[e].res.add:2==t?d=u.levelConfig[e].res.edit:3==t&&(d=u.levelConfig[e].res.del),this.dataModel)h[a]=this.dataModel[a],null!=i[a]&&(h[a].vaule=i[a]),this.dataModel[a].input&&(1==t?(o+=("<div>"+this.dataModel[a].input.title+"<br />"+this.dataModel[a].input.html+"</div>")._eval(i,this.dataModel[a].input.htmlEval),l.push(a)):2==t?(o+=("<div>"+this.dataModel[a].input.title+"<br />"+this.dataModel[a].input.html+"</div>")._eval(i,this.dataModel[a].input.htmlEval),l.push(a)):3==t&&(n&&(s.titleHeight=0,s._h=120,s._w=200,s.styles=s.styles||{},s.styles.bottom=s.styles.bottom||"",s.styles.center=s.styles.top||"",s.styles.box=s.styles.box||"",s.styles.bottom+="border-top:none;",s.styles.center+="border-top:none;",s.styles.box+="left:"+(n.offset().left-150)+"px;top:"+(n.offset().top-110)+"px;"),o="<div>确定删除?</div>"));for(var a in d.req)h[a]=d.req[a];S.confirmx('<div style="text-align:left;margin-left:55px;">'+o+"</div>",function(){for(var t=!0,i="",e=0;e<l.length;e++){var n=h[l[e]].input.val();n.result?h[l[e]].vaule=n.vaule:(t=!1,n.msg&&(i+=n.msg))}if(t){for(var s in h)null!=h[s].vaule?h[s]=h[s].vaule:"object"==typeof h[s]&&(h[s]="");var o=d.url._eval(h),a=d.ajaxConfig||{};a.meth=d.meth,a.data=h,new S.Ajax(o,function(t){t&&t[d.res.successKey]?r(t):t&&t.errorMsg?S.alertx("操作失败!"+t.errorMsg):S.alertx("操作失败，未知错误！")},a).action()}else i&&S.alertx(i)},s)},this.active=[0],this.windowScrollTop=0,this.append=function(d,h,c,p){u.levelConfig[h].res.activeClass&&u.levelConfig[h].res.activeClass;if(c=c||o,null!=d&&this.data["num"+d]){var g=this.data["num"+d],t="";u.levelConfig[h].res.beforeFn&&u.levelConfig[h].res.beforeFn(p,u.active);for(var i=0;i<g.length;i++)t+=u.levelConfig[h].res.html._eval(g[i],u.levelConfig[h].res.htmlEval);this.editable&&(t+=u.levelConfig[h].res.add.html),c.html(t+u.levelConfig[h].res.style),0<h&&(u.active[h-1].childBox=c,u.active[h-1].id=d),c.show(),$(window).scrollTop(this.windowScrollTop),this.editable&&c.find("."+u.levelConfig[h].res.add.btnClass).eq(0).click(function(){var t={};for(var i in u.dataModel)t[i]="";t[u.levelConfig[h].pidKey]=d,u.getAjax(1,t,h,function(){u.data["num"+d]=void 0,u.getData(h,d,c,void 0,p)})}),c.children().each(function(i){var t,e,n=$(this),s=u.levelConfig[h].res.clickBox?$(this).find("."+u.levelConfig[h].res.clickBox).eq(0):$(this);if(u.levelConfig[h].res.icon&&$(this).find("."+u.levelConfig[h].res.icon[0]).eq(0).click(function(){"open"==$(this).attr("open")?(2<u.levelConfig[h].res.icon.length&&$(this).attr("src",u.levelConfig[h].res.icon[1]),$(this).removeAttr("open"),(u.levelConfig[h+1].res.obj?u.levelConfig[h+1].res.obj:n.find("."+u.levelConfig[h].res.childBox).eq(0)).html("")):u.clickFn(h,i)}),s.bind(u.levelConfig[h].res.clickEventType?u.levelConfig[h].res.clickEventType:"click",function(){if("function"==typeof u.levelConfig[h].res.defaultClickFn&&!u.levelConfig[h].res.defaultClickFn(g[i]))return!1;u.clickFn(h,i)}),u.levelConfig[h].res.edit&&u.levelConfig[h].res.edit.btnClass&&(t=$(this).find("."+u.levelConfig[h].res.edit.btnClass).eq(0)).hide(),u.levelConfig[h].res.del&&u.levelConfig[h].res.del.btnClass&&(e=$(this).find("."+u.levelConfig[h].res.del.btnClass).eq(0)).hide(),u.editable){$(this).children().eq(0).mouseover(function(){t.show(),e.show(),"function"==typeof u.levelConfig[h].res.mouseover&&u.levelConfig[h].res.mouseover(i)}),$(this).children().eq(0).mouseout(function(){t.hide(),e.hide(),"function"==typeof u.levelConfig[h].res.mouseout&&u.levelConfig[h].res.mouseout(i)});var o=u.levelConfig[h].res.actions;if(o&&0<o.length){for(var a,r="",l=0;l<o.length;l++)r+='<div class="treeActionDiv">',o[l].html?r+=o[l].html:r+='<label class="treeActionLabel">{label}</label><span class="treeActionIcon"><img src="{icon}" /></span><div class="clear"></div>'._eval(o[l]),r+="</div>";n.find(".showActionsBox").html(r),n.find(".treeActionDiv").each(function(t){o[t].html?o[t].action($(this),g,i):$(this).click(function(){o[t].action($(this),g,i)})}),$(this).find(".showActions").mouseover(function(t){a&&clearTimeout(a),n.find(".showActionsBox").show()}),$(this).find(".showActions").mouseout(function(){a=setTimeout(function(){n.find(".showActionsBox").hide()},500)}),n.find(".showActionsBox").mouseover(function(){clearTimeout(a)}),n.find(".showActionsBox").mouseout(function(){a=setTimeout(function(){n.find(".showActionsBox").hide()},500)})}t.click(function(){u.getAjax(2,u.data["num"+d][i],h,function(){u.data["num"+d]=void 0,u.getData(h,d,c,void 0,p)})}),e.click(function(){u.getAjax(3,u.data["num"+d][i],h,function(){u.data["num"+d]=void 0,u.getData(h,d,c,void 0,p)},e)})}}),u.levelConfig[h].res.endFn&&u.levelConfig[h].res.endFn(u.active)}},this.clickFn=function(t,i){var e=u.levelConfig[t].res.activeClass?u.levelConfig[t].res.activeClass:"active",n=o.children().eq(i);u.active[t-1]&&u.active[t-1].childBox&&(n=u.active[t-1].childBox.children().eq(i));var s=u.levelConfig[0].req[u.levelConfig[0].pidKey];u.active[t-1]&&u.active[t-1].id&&(s=u.active[t-1].id),u.levelConfig[t].res.clickFn&&u.levelConfig[t].res.clickFn(u.active),u.windowScrollTop=$(window).scrollTop(),u.active[t]&&u.active[t].obj.parent().children().removeClass(e),u.levelConfig[t].res.childBoxOnly&&u.active[t]&&u.active[t].flog!=i&&u.active[t].childBox&&u.active[t].childBox.hide(),u.levelConfig[t].res.icon&&u.active[t]&&u.active[t].iconObj&&u.active[t].iconObj.attr("src",u.levelConfig[t].res.icon[1]),u.active[t]={iconObj:u.levelConfig[t].res.icon?n.find("."+u.levelConfig[t].res.icon[0]).eq(0):"",obj:n,flog:i},u.active[t].obj.addClass(e),t+1==u.levelMax?u.loadFn&&u.loadFn(u.data["num"+s][i][u.levelConfig[t].idKey],s,"",u.data["num"+s][i],t+1):(u.levelConfig[t+1]=u.levelConfig[t+1]?u.levelConfig[t+1]:S.clone(u.levelConfig[t]),u.getData(t+1,u.data["num"+s][i][u.levelConfig[t].idKey],u.levelConfig[t+1].res.obj?u.levelConfig[t+1].res.obj:n.find("."+u.levelConfig[t].res.childBox).eq(0),s,u.data["num"+s][i]),u.levelConfig[t].res.icon&&(2<u.levelConfig[t].res.icon.length&&u.active[t].iconObj.attr("src",u.levelConfig[t].res.icon[2]),u.active[t].iconObj.attr("open","open")))},this.getting="",this.getData=function(s,o,a,r,l){(null!=o?this.levelConfig[s].req[this.levelConfig[s].pidKey]=o:o=this.levelConfig[s].req[this.levelConfig[s].pidKey],null!=o&&this.data["num"+o])?(u.append(o,s,a,l),this.loadFn&&this.loadFn(null==o?this.levelConfig[s].req[this.levelConfig[s].pidKey]:o,r,a,l,s)):(this.getting=o,this.SQLite?this.SQLite.find(this.levelConfig[s].req,function(t){n(t)}):(a&&a.html("<div  class='loadBeginMsg'>获取中...</div>"),new S.Ajax(this.levelConfig[s].url,function(t,i,e){e==u.getting&&n(t)},{meth:this.levelConfig[s].meth,data:this.levelConfig[s].req}).action(o)));function n(t){if(t&&!t.errorMsg){var i=t;if(u.levelConfig[s].res.arrKey)for(var e=0;e<u.levelConfig[s].res.arrKey.length;e++)i=i[u.levelConfig[s].res.arrKey[e]];u.data["num"+o]=i,u.append(o,s,a,l)}else{var n="请求失败";t&&t.errorMsg&&(n+=","+t.errorMsg),a&&a.html("<div  class='loadBeginMsg'>"+n+"</div>"),S.alertx(n,function(){u.errorFn&&u.errorFn(null==o?u.levelConfig[s].req[u.levelConfig[s].pidKey]:o,r,a,l,s,t)})}u.loadFn&&u.loadFn(null==o?u.levelConfig[s].req[u.levelConfig[s].pidKey]:o,r,a,l,s)}}},S.useStrict=function(){"use strict";try{useStrict=void 0}catch(t){return!0}},S.platform=function(){var t=navigator.userAgent.toLowerCase();return/iphone|ipad/.test(t)?"iOS":/android/.test(t)?"Android":"Web"},S.on=function(t,i,r,e){e=e||{};var l,d,h,c,p,n=!0;switch(i){case"click":c=[0,70];break;case"pan":c=[70,1e3];break;case"touch":break;default:n=!1}if(!n)return!1;c=e.xy||c,p=e.z||p;var g=!1;function s(t){g=!0,t=t||window.event,e.start&&e.start(t),l=t.changedTouches?t.changedTouches[0].clientX:t.clientX,d=t.changedTouches?t.changedTouches[0].clientY:t.clientY,h=new Date}function o(t,i){i||(g=!1);var e={x:0,y:0,z:0},n=(t=t||window.event).changedTouches?t.changedTouches[0].clientX:t.clientX;n-=l,e.x=n,n=Math.abs(n);var s=t.changedTouches?t.changedTouches[0].clientY:t.clientY;s-=d,e.y=s,s=Math.abs(s);var o=new Date-h;e.z=o,o=Math.abs(o);var a=Math.sqrt(n*n+s*s);return(!c||!(a<c[0]||a>c[1]))&&((!p||!(o<p[0]||o>p[1]))&&(t.xyz=e,void(i?i(t):r(t))))}("ontouchstart"in document.documentElement||"ontouchstart"in document)&&navigator.userAgent.match(/(iPhone|iPod|Android|ios|iPad|SymbianOS|Windows Phone)/i)?(t.addEventListener("touchstart",s,!1),e.move&&t.addEventListener("touchmove",function(t){g&&o(t,e.move)},!1),t.addEventListener("touchend",o,!1)):(t.onmousedown=s,e.move&&(t.onmousemove=function(t){g&&o(t,e.move)}),t.onmouseup=o)},S.ScrollEvent={args:[],bindEvent:!1,init:function(){var n=this.args,s=0;$(window).scroll(function(t){for(var i=$(this).scrollTop(),e=0;e<n.length;e++)n[e][0]&&n[e][0]<=i&&n[e][1](i,s),n[e][0]&&n[e][0]>i&&n[e][2](i,s);s=i})},set:function(){var t=$(window).scrollTop();if(0<arguments.length)for(var i=0;i<arguments.length;i++)this.args.push(arguments[i]),t>=arguments[i][0]?arguments[i][1](t,0):arguments[i][2](t,0);this.bindEvent||(this.init(),this.bindEvent=!0)}},S.WindowResize={args:[],bindEvent:!1,init:function(){var n=this.args;$(window).bind("resize",function(){for(var t=$(window).width(),i=$(window).width(),e=0;e<n.length;e++)"function"==typeof n[e]&&n[e](t,i)})},set:function(){if(0<arguments.length)for(var t=0;t<arguments.length;t++)this.args.push(arguments[t]);this.bindEvent||(this.init(),this.bindEvent=!0)}},S.loadImg=function(t,r){if(r=r||{},t.each){var n=r.err,l=r.errImg||"images/errImg.png";n=0==r.err?"":r.err,t.each(function(t){var i=$(this);!1===r.drag&&(i.attr("ondragstart","return false;"),i.attr("onselectstart","return false;"),i.css("-moz-user-select","none"),i.css("overflow","hidden"));var e=i.attr(r.attrName?r.attrName:"imgSrc");e?function t(i,e,n){var s=document.createElement("Img");var o=e.width();var a=e.height();s.onload=function(){if(o&&a){var t=S.setImgSize({_w:o,_h:a,w:s.width,h:s.height,type:r.type});s.width=t[0],s.height=t[1],s.style.position="relative",s.style.top=t[2]+"px",s.style.left=t[3]+"px"}if(r.attr)for(var i in r.attr)s.setAttribute(i,r.attr[i]);e.html(s),e.css("background-image","none")};n||(s.onerror=function(){n?e.html(n):t(l,e,!0)});s.src=i;e.removeAttr(r.attrName?r.attrName:"imgSrc")}(e,i):n&&(i.html(n),i.css("background-image","none"))})}},S.Lists=function(o){var a=this;this.id=(new Date).only(),this.paging=function(){var i=o.list.pageNum-1;if(o.paging.html("<font style='margin-right:10px;color:#999999;float:left;'>共 "+o.list.total+" 条数据"+(0==o.changePageSize?"":",每页<select id='pageSizeSelect"+this.id+"' style='border-color:#e4e4e4;width:50px;margin:0px 5px;'><option value='5' "+(5==o.list.pageSize?"selected":"")+">5</option><option value='10' "+(10==o.list.pageSize?"selected":"")+">10</option><option value='15' "+(15==o.list.pageSize?"selected":"")+">15</option><option value='20' "+(20==o.list.pageSize?"selected":"")+">20</option><option value='50' "+(50==o.list.pageSize?"selected":"")+">50</option><option value='100' "+(100==o.list.pageSize?"selected":"")+">100</option></select>条</font>")),$("#pageSizeSelect"+this.id).change(function(){localStorage&&o.urlId&&(localStorage[o.urlId]=this.value),o.list.pageSize=this.value,o.list.reLoad()}),o.list.total>o.list.pageSize){var e=Math.ceil(o.list.total/o.list.pageSize),t="<span class='pagaBtn pagaBtnFirst'>首页</span><span class='pagaBtn'><</span>";3<=i-1&&(t+="<span class='pagaBtn'>...</span>");for(var n=0;n<e;n++)i-1-3<n&&n<i-1+3&&(t+="<span class='pagaBtn"+(n+1==i?" pagaBtnActive":"")+"'>"+(n+1)+"</span>");3<e-(i-1)&&(t+="<span class='pagaBtn'>...</span>"),t+="<span class='pagaBtn'>></span><span class='pagaBtn pagaBtnLast'>尾页</span>",o.paging.append(t);var s=o.paging.find("span").size();o.paging.find("span").each(function(t){switch(t){case 0:$(this).attr("num",1);break;case 1:$(this).attr("num",1==i?1:i-1);break;case s-1:$(this).attr("num",e);break;case s-2:$(this).attr("num",i==e?e:i+1);break;default:$(this).attr("num",$(this).html())}$(this).click(function(){0<=(i=- -$(this).attr("num"))&&o.list.refresh(a.append,i)})})}},this.changeStatu=function(){o.status&&(o.list.status.loading||o.list.status.refreshing?o.status.html('<div class="loadStatu loads_loading">加载中...</div>'):o.list.status.beforeLoad?o.status.html('<div class="loadStatu loads_beforeLoad">点击获取数据</div>'):o.list.status.noData?o.status.html('<div class="loadStatu loads_noData">抱歉,未找到相应内容</div>'):o.list.status.allLoaded?o.status.html('<div class="loadStatu loads_allLoaded">已全部加载完成</div>'):o.status.html('<div class="loadStatu loads_load">点击加载更多</div>'),o.status.find(".loads_beforeLoad,.loads_noData,.loads_load").click(function(){o.list.load(a.append)}))},this.append=function(){for(var t="",i=0;i<o.list.data.length;i++)t+=o.template._eval(o.list.data[i],o.templateEval);t+=o.clear||'<div style="clear:both;"></div>',o.paging?(o.obj.html(t),a.paging()):o.obj.append(t),a.changeStatu(),o.loaded&&o.loaded()},o.list.beforeLoadFn=this.changeStatu,o.list.load(this.append)},S.picBox=function(t,i){$("body").append('<div id="_picBoxClose" style="position:fixed;z-index:4999;color:#fff;right:8px;top:8px;padding:3px 10px;">X</div><div style="position:fixed;z-index:4998;left:0px;top:0px;right:0px;bottom:0px;background:rgba(0,0,0,0.5);display:flex;justify-content: center;align-items: center;" id="_picBox"><img style="max-width:100%;" id="_picBoxImg" src="'+t+'" /></div>');var s=[],o=[],a=0;function r(){$("#_picBoxImg").css("transform","translate3d("+_left+"px, "+_top+"px, 0px) scale("+scale+", "+scale+")")}scale=1,_left=0,_top=0,scaleing=!1,Y.on($("#_picBox")[0],"touch",function(t){$("#_picBox").remove(),$("#_picBoxClose").remove(),t.preventDefault()},{move:function(t){t.preventDefault()}}),S.on($("#_picBoxClose")[0],"click",function(t){$("#_picBox").remove(),$("#_picBoxClose").remove()}),S.on($("#_picBoxImg")[0],"touch",function(t){t.stopPropagation(),scaleing=!1},{move:function(t){if(t.changedTouches)if(1<t.changedTouches.length){var i=[t.changedTouches[0].clientX,t.changedTouches[1].clientX],e=[t.changedTouches[0].clientY,t.changedTouches[1].clientY],n=Math.sqrt(i[0]-i[1])*(i[0]-i[1])+(e[0]-e[1])*(e[0]-e[1]);0!=n&&(scaleing=!0,a<n?scale+=.1:(scale-=.1,scale=scale<1?1:scale),r(),s=i,o=e,a=n)}else if(!scaleing){i=t.changedTouches[0].clientX,e=t.changedTouches[0].clientY;_left+=0<i-s?3:-3,_top+=0<e-o?3:-3,r(),s=i,o=e}}})},S.zIndex=(i=0,function(t){return 1e4*(t||4)+i++}),S.clone=function(t,i){if(!t||"object"!=typeof t)return t;if(i&&JSON)return JSON.parse(JSON.stringify(t));var e=t.constructor===Array?[]:{};for(var n in t)e[n]="object"!=typeof t?t[n]:S.clone(t[n]);return e},S.equal=function(t,i){if(!t||!i||"object"!=typeof t||"object"!=typeof i)throw"typeof arguments must be object and not null";for(var e in i)t[e]&&i[e]&&"object"==typeof t[e]&&"object"==typeof i[e]?arguments.callee(t[e],i[e]):t[e]=i[e]},S.precent=function(t,i){i=i||{};for(var e=[],n=[],s=0,o=1,a=0;a<i.size;a++)o*=10;for(a=0;a<t.length;a++)s+=t[a]?- -t[a]:0;for(a=0;a<t.length;a++)e.push(parseInt(t[a]/s*100*o)),n.push({i:a,n:t[a]});n.sort(function(t,i){return i.n-t.n});var r=0;for(a=0;a<e.length;a++)r+=e[a];a=0;if(r<100*o)for(;e[n[a].i]+=1,a++,(r+=1)<100*o;);for(a=0;a<e.length;a++)e[a]/=o;return e},S.setImgSize=function(t){t.type=t.type||1;var i,e,n=t.w,s=t.h,o=t._w,a=t._h;if(n<=o&&s<=a)i=n,e=s;else switch(t.type){case"x":o<=n&&(i=o,e=l());break;case"y":a<=s&&(e=a,i=r());break;default:o<=n?(i=o,e=l(),a<e&&(e=a,i=r())):a<=s&&(e=a,i=r())}function r(){return a/s*n}function l(){return o/n*s}return[i,e,(a-e)/2,(o-i)/2]},S.utf16to8=function(t){var i,e,n,s;for(i="",n=t.length,e=0;e<n;e++)1<=(s=t.charCodeAt(e))&&s<=127?i+=t.charAt(e):(2047<s?(i+=String.fromCharCode(224|s>>12&15),i+=String.fromCharCode(128|s>>6&63)):i+=String.fromCharCode(192|s>>6&31),i+=String.fromCharCode(128|s>>0&63));return i},S.string=function(r){return(r=new String(r)).replaceAll=function(t,i){return this.split(t).join(i)},r.max=function(t,i){i=i||"...";var e=this;return e=e.length>t?e.substr(0,t-i.length)+i:e},r._eval=function(t,i,e){var n=this;for(var s in t){var o=t[s];o=null==o||null==o?"":o,n=(n=n.replace(new RegExp("{()"+s+"}","g"),o)).replace(new RegExp("{listStyle_"+s+"}","g"),"string"==typeof o?o.charAt(0):"?"),i&&(n=i(n,s,o,t))}return e&&(n=e(n,t)),n},r.dhms=function(t){var i=- -r,e="",n=parseInt(i/86400);e=0<n?n+"天":"";var s=parseInt(i/3600%24);(e||0<s)&&(e+=s+"时");var o=parseInt(i/60%60);(e||0<o)&&(e+=o+"分");var a=parseInt(i%60);return(e||0<a)&&(e+=a+"秒"),"Array"==t?e=[n,s,o,a]:"Object"==t&&(e={d:n,h:s,m:o,s:a}),e},r},S.Verify={Name:function(t){return[0<(t=t.replace(/(^\s*)|(\s*$)/g,"")).length,"不能为空"]},Phone:function(t){return[/^1\d{10}$/.test(t),"格式错误"]},IDCard:function(t){var i,e,n,s,o=t.length;if(15===o){if(!(i=t.match(/^(?:\d{6})(\d{2})(\d{2})(\d{2})(?:\d{3})$/)))return[!1,"格式错误"];e=parseInt("19"+i[1],10),n=parseInt(i[2],10),s=parseInt(i[3],10),t.charAt(o-1)%2}else if(18===o){for(var a=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],r=0,l=0;r<17;r++)l+=t.charAt(r)*a[r];if("10X98765432".charAt(l%11)!==t.charAt(17).toUpperCase())return[!1,"格式错误"];if(!(i=t.match(/^(?:\d{6})(\d{4})(\d{2})(\d{2})(?:\d{3})(?:[0-9]|X)$/i)))return[!1,"格式错误"];e=parseInt(i[1],10),n=parseInt(i[2],10),s=parseInt(i[3],10),t.charAt(o-2)%2}var d=new Date(e,n-1,s);return e!==d.getFullYear()||n!==d.getMonth()+1||s!==d.getDate()?[!1,"格式错误"]:[[e+(n<10?"-0":"-")+n+(s<10?"-0":"-")+s,e,n,s],"格式错误"]},Email:function(t){return[/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/.test(t),"格式错误"]},Date:function(t){return[/^\d{4}(-\d{1,2}(-\d{1,2})?)?$/.test(t),"格式错误"]},PositiveInt:function(t){return[/^\d+$/.test(t),"必须为正整数"]},NotNull:function(t){return[!(null==t||null==t||""==t),"不能为空"]},MaxLength:function(t,i){return[t.length<=i,"最大长度为"+i]},MinLength:function(t,i){return[t.length>=i,"最小长度为"+i]},MaxNumber:function(t,i){return[t<=i,"最大值为"+i]},MinNumber:function(t,i){return[i<=t,"最小值为"+i]},Regx:function(t,i){return i=i.split("_gmi_"),[new RegExp(i[0],i[1]).test(t),"格式不正确"]},Rules:function(t,i,e){e=e||{};var n=[];if((i=i||{}).NotNull||this.NotNull(t)[0])for(var s in i){var o=i[s];if(0!=o){var a=this[s](t,o);if(!a[0]){n.push("string"==typeof e[s]?e[s]:a[1]);break}}}else;return[0==n.length,n.join(",")]},ComponentsData:function(t,i){for(var e=[],n=0;n<i.length;n++)if(i[n].rule){var s=this.Rules(t[i[n].id],i[n].rule);s[0]||e.push(i[n].label+s[1])}return[0==e.length,e.join(",")]}},S.Item=function(t){var i=this;this.typeOf="Item",this.item=[],this.length=0,this.flog=0,this.max=t.max||1,this.actionLength=0,this._push=function(t){this.length++,this.item.push(t),this.actionLength<this.max&&this._do()},this._do=function(){this.actionLength++,this.length--,this.item[this.flog](function(){i.actionLength--,0<i.length&&i._do()}),this.item[this.flog]=null,this.flog++}},S.Ajax=function(t,i,g){var u=S;g=g||{};var f=this;this.url=t,this.header=g.header||[],this.loading=g.loading||{},this.type=g.meth||"GET",this.contentType=g.contentType||"application/x-www-form-urlencoded; charset=UTF-8",this.dataType=g.dataType||"json",this.async=!1!==g.async,this.data=g.data||{},this.progress=g.progress,this.cache=!1!==g.cache,this.finalFn=i,this.storage=g.storage||{},g.storageName&&(this.storage.name=g.storageName),this.storage.name&&u.Storage.init(this.storage.name,this.storage);var v=g.xhr||new XMLHttpRequest;v.upload?(v.upload.onprogress=function(t){t.lengthComputable&&f.progress&&f.progress(t)},v.onload=function(t){f.complete(t)},v.onabort=function(t){f.loading.close&&f.loading.close(),f.returnFn({errorMsg:v.responseText?v.responseText:"请求中断"})},v.onerror=function(t){f.loading.close&&f.loading.close(),f.returnFn({errorMsg:v.responseText?v.responseText:"连接服务器失败"})}):v.onreadystatechange=function(){4==v.readyState&&f.complete()},this.abort=function(){v.onabort&&v.abort()},this.complete=function(t){if(f.loading.close&&f.loading.close(),404==v.status)this.returnFn({errorMsg:v.statusText});else{t=v.responseText||t;var i=u.Storage.get("loginAction");i&&!g.noLoginAction?i(t,function(t){f.returnFn("",t)}):f.returnFn("",t)}},this.actionKey="",this.itemNext="",this.returned=!1,this.timeoutTimer="",this.returnFn=function(t,i,e){if(this.timeoutTimer&&(clearTimeout(this.timeoutTimer),this.timeoutTimer=""),this.returned)return!1;if(this.returned=!0,t&&(i=JSON.stringify(t),t.xhr=v),"json"==this.dataType.toLowerCase())try{i="string"==typeof i?JSON.parse(i):i}catch(t){i={errorMsg:"返回数据格式错误"}}e||i.errorMsg||!this.storage.name||u.Storage.set(this.storage.name,i),this.finalFn(i,t,this.actionKey),this.itemNext&&this.itemNext()},this.action=function(t,i){try{this.returned=!1;var s=u.string(this.url);this.actionKey=t,i&&"function"==typeof i&&(this.finalFn=i);var e=this.storage&&this.storage.name&&u.Storage.get(this.storage.name);if(e)this.returnFn("",e,!0);else{/{.+}/.test(s)&&(s=s._eval(this.data));var o="";if(this.data&&this.data.constructor&&0==this.data.constructor.toString().indexOf("function FormData()"))o=this.data,this.contentType="";else{if("POST"!=this.type.toUpperCase()&&"PUT"!=this.type.toUpperCase()&&"DELETE"!=this.type.toUpperCase()||g.dataJson){this.cache&&(this.data._=(new Date).getTime());var n=!0,a=u.clone(this.data);for(var r in a)void 0!==a[r]&&(a[r]=encodeURI("object"==typeof a[r]?JSON.stringify(a[r]):a[r]),n?(o+=r+"="+a[r],n=!1):o+="&"+r+"="+a[r])}else{var l=!0;for(var r in this.data)l=!1;o+=l?"":JSON.stringify(this.data),this.contentType="application/json;charset=utf-8"}"GET"==this.type.toUpperCase()&&(-1==s.indexOf("?")&&(s+="?"),s+=("?"==s.charAt(s.length-1)?"":"&")+o,o=""),this.loading.open&&this.loading.open()}var d=u.Storage.get("beforeLoginAction");if(d&&!g.noBeforeLoginAction){var h=d.call(this);if(h)return this.complete(h),!1}var c="";function p(t){t&&(f.itemNext=t),v.open(f.type,s,f.async),f.contentType&&v.setRequestHeader("Content-Type",f.contentType);try{var i=u.Storage.get("ajaxHeader");for(e=0;e<i.length;e++)v.setRequestHeader(i[e].key,i[e].vaule)}catch(t){}for(var e=0;e<f.header.length;e++)v.setRequestHeader(f.header[e].key,f.header[e].vaule);v.send(o);var n=g.timeout?g.timeout:u.Storage.get("ajaxTimeOut");0<n&&(f.timeoutTimer=setTimeout(function(){f.loading.close&&f.loading.close(),f.returnFn({errorMsg:"请求超时"})},n))}1==g.Item?(c=u.Storage.get("_ajaxItems"))||(c=new u.Item({max:5}),u.Storage.set("_ajaxItems",c)):c=g.Item,"object"==typeof c&&"Item"==c.typeOf?c._push(p):p()}}catch(t){f.returnFn({errorMsg:"请求异常"})}}},S.Storage={state:{},config:{},localStorage:function(){try{return localStorage}catch(t){return null}}(),setLocalStorage:function(t){t&&t.setItem&&t.getItem&&t.removeItem&&t.length&&(this.localStorage=t)},init:function(t,i){i=i||{},this.config[t]||(this.config[t]={createTime:new Date,times:i.times||0,useTimes:0,timeSpan:i.timeSpan||0,type:i.type||0})},set:function(t,i){if(this.config[t]&&(this.config[t].useTimes=0,1==this.config[t].type&&this.localStorage))return this.localStorage.setItem(t,"string"==typeof i?i:JSON.stringify(i)),!1;this.state[t]&&i&&this.state[t],this.state[t]=i},get:function(t){if(this.config[t]){var i=!0,e=this.config[t];0<e.times&&e.times<=e.useTimes&&(i=!1),0<e.timeSpan&&e.timeSpan<new Date-e.createTime&&(i=!1);var n=1==this.config[t].type&&this.localStorage?this.localStorage.getItem(t):this.state[t];try{n="string"==typeof n?JSON.parse(n):n}catch(t){}return i?n:void 0}return this.state[t]}},S.SQLite=function(a,t){function h(t,i,e){t=t||{},e=e||{};for(var n=0;n<a.length;n++){var s=!0;for(var o in t)void 0!==a[n]&&t[o]==a[n][o]||(s=!1);if(s&&(i(a[n],n),e.findOne))break}}a=a||[],t=t||{},this.find=function(t,i,e){var n=[];if(h(t,function(t,i){t._id=i,n.push(S.clone(t))},e=e||{}),e.sortFn&&n.sort(e.sortFn),e.pageNum){for(var s=e.pageSize||1e8,o=e.pageNum||1,a=s*(o-1),r=o*s-1,l=[],d=0;d<n.length;d++)a<=d&&d<=r&&l.push(n[d]);i({pageSize:s,pageNum:o,rows:l,total:n.length})}else i(n)},this.insert=function(t,i){t=t||{},a.push(t)},this.update=function(t,n,i,e){n=n||{};var s=!1;h(t,function(t,i){for(var e in n)t[e]=n[e];a[i]=t,s=!0},e),i(s)},this.remove=function(t,i,e){var n=!1;h(t,function(t,i){a[i]=void 0,n=!0},e),i(n)}},S.Indicator=function(i){var e=this;i=i||{},this.runing=!1,this.active=0,this.timer="",this.n=Math.ceil(i.windowSize/i.boxSize),this.play=function(t){if(this.runing)return!1;this.timer&&clearTimeout(this.timer),this.runing=!0,i.hide&&i.hide(this.active),this.active+=t,i.show(this.active,!1,function(){e.end()})},this.end=function(){this.runing=!1,0==this.active?(this.active=i.count,i.show(this.active,!0)):this.active==3*i.count-this.n&&(this.active=2*i.count-this.n,i.show(this.active,!0)),this.timer=setTimeout(function(){e.timer="",e.play(i.playCount||1)},i.timeSpan||5e3)}},Object.defineProperties){var t={};for(var e in S)t[e]={value:S[e],writable:!(S[e]&&!S[e].writable),enumerable:!1,configurable:!1};S=Object.defineProperties({},t)}}(Y);